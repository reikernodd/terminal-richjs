{"version":3,"sources":["../src/terminal/terminal.ts","../src/core/style.ts","../src/utils/color.ts","../src/themes/palette.ts","../src/themes/theme.ts","../src/core/segment.ts","../src/core/markup.ts","../src/types/renderable.ts","../src/traceback/trace.ts","../src/syntax/theme.ts","../src/syntax/syntax.ts","../src/traceback/traceback.ts","../src/utils/render-utils.ts","../src/status/spinners.ts","../src/status/spinner.ts","../src/status/status.ts","../src/console/console.ts","../src/renderables/text.ts","../src/utils/box.ts","../src/core/lines.ts","../src/renderables/panel.ts","../src/renderables/padding.ts","../src/renderables/align.ts","../src/renderables/json.ts","../src/markdown/markdown.ts","../src/index.ts","../src/cli/utils.ts","../src/cli.ts"],"names":["process","stringWidth","Trace","fs","wrapAnsi","JSON","__filename","__dirname","readFileSync"],"mappings":"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","file":"cli.js","sourcesContent":["import os from \"node:os\";\nimport process from \"node:process\";\nimport terminalSize from \"terminal-size\";\n\nexport type ColorSystem = \"standard\" | \"256\" | \"truecolor\" | \"none\";\n\nexport class Terminal {\n\tget width(): number {\n\t\treturn terminalSize().columns;\n\t}\n\n\tget height(): number {\n\t\treturn terminalSize().rows;\n\t}\n\n\tget isInteractive(): boolean {\n\t\treturn !!process.stdout.isTTY;\n\t}\n\n\tget isLegacyWindows(): boolean {\n\t\treturn os.platform() === \"win32\" && !process.env.WT_SESSION;\n\t}\n\n\tget colorSystem(): ColorSystem {\n\t\t// Basic detection logic based on env vars\n\t\t// In a real implementation we might use 'supports-color' package or similar logic\n\t\tconst env = process.env;\n\n\t\tif (env.NO_COLOR) return \"none\";\n\n\t\tif (env.COLORTERM === \"truecolor\" || env.COLORTERM === \"24bit\") {\n\t\t\treturn \"truecolor\";\n\t\t}\n\n\t\tif (this.isLegacyWindows) {\n\t\t\treturn \"standard\";\n\t\t}\n\n\t\t// Default to standard or 256 based on TERM\n\t\tif (env.TERM?.includes(\"256\")) {\n\t\t\treturn \"256\";\n\t\t}\n\n\t\treturn \"standard\";\n\t}\n}\n","/** biome-ignore-all lint/suspicious/noExplicitAny: false */\n/** biome-ignore-all assist/source/organizeImports: false */\nimport chalk from \"chalk\";\nimport type { StyleOptions, Color, RGB } from \"../types/style-types\";\n\nexport class Style {\n\t/**\n\t * Apply this style to text (alias for render).\n\t */\n\tapply(text: string): string {\n\t\treturn this.render(text);\n\t}\n\treadonly color?: Color;\n\treadonly backgroundColor?: Color;\n\treadonly bold?: boolean;\n\treadonly italic?: boolean;\n\treadonly underline?: boolean;\n\treadonly strikethrough?: boolean;\n\treadonly dim?: boolean;\n\treadonly reverse?: boolean;\n\treadonly blink?: boolean;\n\treadonly hidden?: boolean;\n\n\tconstructor(options: StyleOptions = {}) {\n\t\tthis.color = options.color;\n\t\tthis.backgroundColor = options.backgroundColor;\n\t\tthis.bold = options.bold;\n\t\tthis.italic = options.italic;\n\t\tthis.underline = options.underline;\n\t\tthis.strikethrough = options.strikethrough;\n\t\tthis.dim = options.dim;\n\t\tthis.reverse = options.reverse;\n\t\tthis.blink = options.blink;\n\t\tthis.hidden = options.hidden;\n\t}\n\n\tstatic null(): Style {\n\t\treturn new Style({});\n\t}\n\n\t/**\n\t * Parse a style string into a Style object.\n\t * Supports:\n\t * - Modifiers: bold, italic, underline, dim, strike, reverse, blink, hidden\n\t * - Named colors: red, green, blue, cyan, magenta, yellow, white, black\n\t * - Bright colors: bright_red, bright_green, etc.\n\t * - Hex colors: #ff0000\n\t * - RGB colors: rgb(255,0,0)\n\t * - 256 colors: color(196)\n\t * - Background: on red, on #ff0000, on rgb(255,0,0)\n\t */\n\tstatic parse(styleString: string): Style {\n\t\tif (!styleString.trim()) return Style.null();\n\n\t\tconst options: StyleOptions = {};\n\t\tconst words = styleString.trim().split(/\\s+/);\n\t\tlet i = 0;\n\n\t\twhile (i < words.length) {\n\t\t\tconst word = words[i];\n\n\t\t\t// Check for modifiers\n\t\t\tif (word === \"bold\") {\n\t\t\t\toptions.bold = true;\n\t\t\t\ti++;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (word === \"italic\") {\n\t\t\t\toptions.italic = true;\n\t\t\t\ti++;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (word === \"underline\") {\n\t\t\t\toptions.underline = true;\n\t\t\t\ti++;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (word === \"strike\" || word === \"strikethrough\") {\n\t\t\t\toptions.strikethrough = true;\n\t\t\t\ti++;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (word === \"dim\") {\n\t\t\t\toptions.dim = true;\n\t\t\t\ti++;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (word === \"reverse\") {\n\t\t\t\toptions.reverse = true;\n\t\t\t\ti++;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (word === \"blink\") {\n\t\t\t\toptions.blink = true;\n\t\t\t\ti++;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (word === \"hidden\") {\n\t\t\t\toptions.hidden = true;\n\t\t\t\ti++;\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// Check for background color prefix \"on\"\n\t\t\tif (word === \"on\") {\n\t\t\t\tif (i + 1 < words.length) {\n\t\t\t\t\tconst bgColor = Style.parseColor(words[i + 1]);\n\t\t\t\t\tif (bgColor !== null) {\n\t\t\t\t\t\toptions.backgroundColor = bgColor;\n\t\t\t\t\t\ti += 2;\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\ti++;\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// Check for color\n\t\t\tconst color = Style.parseColor(word);\n\t\t\tif (color !== null) {\n\t\t\t\toptions.color = color;\n\t\t\t\ti++;\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// Unknown word, skip\n\t\t\ti++;\n\t\t}\n\n\t\treturn new Style(options);\n\t}\n\n\t/**\n\t * Parse a single color value.\n\t * Supports hex (#ff0000), RGB (rgb(255,0,0)), 256-color (color(196)), and named colors.\n\t */\n\tprivate static parseColor(word: string): Color | null {\n\t\t// Hex color: #ff0000 or #f00\n\t\tif (word.startsWith(\"#\")) {\n\t\t\tif (/^#[0-9a-fA-F]{6}$/.test(word) || /^#[0-9a-fA-F]{3}$/.test(word)) {\n\t\t\t\treturn word;\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\n\t\t// RGB color: rgb(255,0,0) or rgb(255, 0, 0)\n\t\tconst rgbMatch = word.match(\n\t\t\t/^rgb\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*\\)$/i,\n\t\t);\n\t\tif (rgbMatch) {\n\t\t\treturn {\n\t\t\t\tr: Math.min(255, parseInt(rgbMatch[1], 10)),\n\t\t\t\tg: Math.min(255, parseInt(rgbMatch[2], 10)),\n\t\t\t\tb: Math.min(255, parseInt(rgbMatch[3], 10)),\n\t\t\t};\n\t\t}\n\n\t\t// 256-color: color(196)\n\t\tconst color256Match = word.match(/^color\\(\\s*(\\d+)\\s*\\)$/i);\n\t\tif (color256Match) {\n\t\t\treturn Math.min(255, parseInt(color256Match[1], 10));\n\t\t}\n\n\t\t// Named colors (including bright_ variants)\n\t\tconst namedColors = [\n\t\t\t\"black\",\n\t\t\t\"red\",\n\t\t\t\"green\",\n\t\t\t\"yellow\",\n\t\t\t\"blue\",\n\t\t\t\"magenta\",\n\t\t\t\"cyan\",\n\t\t\t\"white\",\n\t\t\t\"gray\",\n\t\t\t\"grey\",\n\t\t\t\"blackBright\",\n\t\t\t\"redBright\",\n\t\t\t\"greenBright\",\n\t\t\t\"yellowBright\",\n\t\t\t\"blueBright\",\n\t\t\t\"magentaBright\",\n\t\t\t\"cyanBright\",\n\t\t\t\"whiteBright\",\n\t\t\t// Underscore variants commonly used\n\t\t\t\"bright_black\",\n\t\t\t\"bright_red\",\n\t\t\t\"bright_green\",\n\t\t\t\"bright_yellow\",\n\t\t\t\"bright_blue\",\n\t\t\t\"bright_magenta\",\n\t\t\t\"bright_cyan\",\n\t\t\t\"bright_white\",\n\t\t];\n\n\t\t// Convert snake_case to camelCase for bright colors\n\t\tlet normalizedWord = word;\n\t\tif (word.startsWith(\"bright_\")) {\n\t\t\tconst base = word.slice(7);\n\t\t\tnormalizedWord = `${base}Bright`;\n\t\t}\n\n\t\tif (namedColors.includes(word) || namedColors.includes(normalizedWord)) {\n\t\t\treturn word;\n\t\t}\n\n\t\t// Could be an unknown color name, return it anyway and let chalk handle it\n\t\tif (/^[a-zA-Z]+$/.test(word)) {\n\t\t\treturn word;\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tcombine(other: Style): Style {\n\t\treturn new Style({\n\t\t\tcolor: other.color ?? this.color,\n\t\t\tbackgroundColor: other.backgroundColor ?? this.backgroundColor,\n\t\t\tbold: other.bold ?? this.bold,\n\t\t\titalic: other.italic ?? this.italic,\n\t\t\tunderline: other.underline ?? this.underline,\n\t\t\tstrikethrough: other.strikethrough ?? this.strikethrough,\n\t\t\tdim: other.dim ?? this.dim,\n\t\t\treverse: other.reverse ?? this.reverse,\n\t\t\tblink: other.blink ?? this.blink,\n\t\t\thidden: other.hidden ?? this.hidden,\n\t\t});\n\t}\n\n\trender(text: string): string {\n\t\tlet result: any = chalk;\n\n\t\t// Apply foreground color\n\t\tif (this.color) {\n\t\t\tresult = this.applyColor(result, this.color, false);\n\t\t}\n\n\t\t// Apply background color\n\t\tif (this.backgroundColor) {\n\t\t\tresult = this.applyColor(result, this.backgroundColor, true);\n\t\t}\n\n\t\t// Apply modifiers\n\t\tif (this.bold) result = result.bold;\n\t\tif (this.italic) result = result.italic;\n\t\tif (this.underline) result = result.underline;\n\t\tif (this.strikethrough) result = result.strikethrough;\n\t\tif (this.dim) result = result.dim;\n\t\tif (this.reverse) result = result.inverse;\n\t\tif (this.blink) result = result.blink;\n\t\tif (this.hidden) result = result.hidden;\n\n\t\treturn result(text);\n\t}\n\n\t/**\n\t * Apply a color to a chalk instance.\n\t */\n\tprivate applyColor(\n\t\tchalkInstance: any,\n\t\tcolor: Color,\n\t\tisBackground: boolean,\n\t): any {\n\t\t// String color (hex or named)\n\t\tif (typeof color === \"string\") {\n\t\t\tif (color.startsWith(\"#\")) {\n\t\t\t\t// Hex color\n\t\t\t\treturn isBackground\n\t\t\t\t\t? chalkInstance.bgHex(color)\n\t\t\t\t\t: chalkInstance.hex(color);\n\t\t\t}\n\n\t\t\t// Handle bright_ prefix conversion\n\t\t\tlet colorName = color;\n\t\t\tif (color.startsWith(\"bright_\")) {\n\t\t\t\tconst base = color.slice(7);\n\t\t\t\tcolorName = `${base}Bright`;\n\t\t\t}\n\n\t\t\t// Named color\n\t\t\tif (isBackground) {\n\t\t\t\tconst bgMethod = `bg${colorName.charAt(0).toUpperCase()}${colorName.slice(1)}`;\n\t\t\t\tif (bgMethod in chalkInstance) {\n\t\t\t\t\treturn chalkInstance[bgMethod as keyof typeof chalkInstance];\n\t\t\t\t}\n\t\t\t\t// Fallback: try as-is\n\t\t\t\tconst altMethod = `bg${color.charAt(0).toUpperCase()}${color.slice(1)}`;\n\t\t\t\tif (altMethod in chalkInstance) {\n\t\t\t\t\treturn chalkInstance[altMethod as keyof typeof chalkInstance];\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (colorName in chalkInstance) {\n\t\t\t\t\treturn chalkInstance[colorName as keyof typeof chalkInstance];\n\t\t\t\t}\n\t\t\t\tif (color in chalkInstance) {\n\t\t\t\t\treturn chalkInstance[color as keyof typeof chalkInstance];\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn chalkInstance;\n\t\t}\n\n\t\t// RGB object\n\t\tif (this.isRGB(color)) {\n\t\t\treturn isBackground\n\t\t\t\t? chalkInstance.bgRgb(color.r, color.g, color.b)\n\t\t\t\t: chalkInstance.rgb(color.r, color.g, color.b);\n\t\t}\n\n\t\t// 256-color number\n\t\tif (typeof color === \"number\") {\n\t\t\treturn isBackground\n\t\t\t\t? chalkInstance.bgAnsi256(color)\n\t\t\t\t: chalkInstance.ansi256(color);\n\t\t}\n\n\t\treturn chalkInstance;\n\t}\n\n\tprivate isRGB(color: any): color is RGB {\n\t\treturn (\n\t\t\ttypeof color === \"object\" &&\n\t\t\tcolor !== null &&\n\t\t\t\"r\" in color &&\n\t\t\t\"g\" in color &&\n\t\t\t\"b\" in color\n\t\t);\n\t}\n}\n","import tinycolor from \"tinycolor2\";\n\nexport class Color {\n\tprivate tc: tinycolor.Instance;\n\n\tconstructor(color: string | tinycolor.ColorInput) {\n\t\tthis.tc = tinycolor(color);\n\t}\n\n\tstatic parse(color: string): Color {\n\t\treturn new Color(color);\n\t}\n\n\tget hex(): string {\n\t\treturn this.tc.toHexString();\n\t}\n\n\tget rgb(): { r: number; g: number; b: number } {\n\t\treturn this.tc.toRgb();\n\t}\n\n\tget isDark(): boolean {\n\t\treturn this.tc.isDark();\n\t}\n\n\tget isLight(): boolean {\n\t\treturn this.tc.isLight();\n\t}\n\n\tcontrast(other: Color): number {\n\t\treturn tinycolor.readability(this.tc, other.tc);\n\t}\n\n\tlighten(amount: number = 10): Color {\n\t\treturn new Color(this.tc.lighten(amount));\n\t}\n\n\tdarken(amount: number = 10): Color {\n\t\treturn new Color(this.tc.darken(amount));\n\t}\n\n\t/**\n\t * Returns a readable foreground color (black or white) for this background color.\n\t */\n\tgetContrastColor(): Color {\n\t\treturn this.isDark ? new Color(\"#ffffff\") : new Color(\"#000000\");\n\t}\n}\n","import { Color } from \"../utils/color\";\n\nexport class Palette {\n\tconstructor(public colors: Record<string, string> = {}) {}\n\n\tget(name: string): string | undefined {\n\t\treturn this.colors[name];\n\t}\n\n\t/**\n\t * Generates a simple palette from a primary color.\n\t */\n\tstatic fromPrimary(primary: string): Palette {\n\t\tconst p = new Color(primary);\n\t\treturn new Palette({\n\t\t\tprimary: p.hex,\n\t\t\tsecondary: p.lighten(20).hex,\n\t\t\tbackground: \"#121212\",\n\t\t\tsurface: \"#1e1e1e\",\n\t\t\ttext: \"#ffffff\",\n\t\t\terror: \"#cf6679\",\n\t\t\tsuccess: \"#03dac6\",\n\t\t\twarning: \"#bb86fc\",\n\t\t});\n\t}\n}\n\nexport const DEFAULT_PALETTE = new Palette({\n\tprimary: \"#007bff\",\n\tsecondary: \"#6c757d\",\n\tsuccess: \"#28a745\",\n\tinfo: \"#17a2b8\",\n\twarning: \"#ffc107\",\n\tdanger: \"#dc3545\",\n\tlight: \"#f8f9fa\",\n\tdark: \"#343a40\",\n});\n","import { Style } from \"../core/style\";\nimport { DEFAULT_PALETTE, type Palette } from \"./palette\";\n\nexport class Theme {\n\tpublic palette: Palette;\n\n\tconstructor(\n\t\tpublic styles: Record<string, Style | string> = {},\n\t\tpalette?: Palette,\n\t) {\n\t\tthis.palette = palette ?? DEFAULT_PALETTE;\n\t}\n\n\tget(name: string): Style {\n\t\t// 1. Check if it's a semantic style name\n\t\tconst style = this.styles[name];\n\t\tif (style) {\n\t\t\treturn typeof style === \"string\" ? this.parseWithPalette(style) : style;\n\t\t}\n\n\t\t// 2. Check if it's a palette color name used as a style (e.g. \"[primary]\")\n\t\tconst paletteColor = this.palette.get(name);\n\t\tif (paletteColor) {\n\t\t\treturn new Style({ color: paletteColor });\n\t\t}\n\n\t\treturn Style.null();\n\t}\n\n\t/**\n\t * Parses a style string replacing palette references.\n\t * e.g. \"bold primary\" -> \"bold #007bff\"\n\t */\n\tprivate parseWithPalette(styleString: string): Style {\n\t\tconst parts = styleString.split(\" \");\n\t\tconst resolvedParts = parts.map((part) => {\n\t\t\t// Check foreground\n\t\t\tconst color = this.palette.get(part);\n\t\t\tif (color) return color;\n\n\t\t\t// Check background \"on primary\"\n\t\t\tif (part.startsWith(\"on\")) {\n\t\t\t\tconst bgName = part.startsWith(\"on_\")\n\t\t\t\t\t? part.slice(3)\n\t\t\t\t\t: part.slice(2) || parts[parts.indexOf(part) + 1];\n\t\t\t\tconst bgColor = this.palette.get(bgName);\n\t\t\t\tif (bgColor) return `on ${bgColor}`;\n\t\t\t}\n\t\t\treturn part;\n\t\t});\n\t\treturn Style.parse(resolvedParts.join(\" \"));\n\t}\n\n\tstatic fromPalette(palette: Palette): Theme {\n\t\treturn new Theme(\n\t\t\t{\n\t\t\t\tdanger: `bold ${palette.get(\"danger\")}`,\n\t\t\t\tsuccess: `bold ${palette.get(\"success\")}`,\n\t\t\t\twarning: `bold ${palette.get(\"warning\")}`,\n\t\t\t\tinfo: `${palette.get(\"info\")}`,\n\t\t\t},\n\t\t\tpalette,\n\t\t);\n\t}\n}\n\nexport const DEFAULT_THEME = new Theme({\n\tnone: Style.null(),\n\tdim: Style.parse(\"dim\"),\n\tbright: Style.parse(\"bold\"),\n\n\t// Semantic\n\tdanger: Style.parse(\"bold red\"),\n\tsuccess: Style.parse(\"bold green\"),\n\twarning: Style.parse(\"bold yellow\"),\n\tinfo: Style.parse(\"cyan\"),\n\n\t// Components\n\t\"rule.line\": Style.parse(\"green\"),\n\t\"repr.str\": Style.parse(\"green\"),\n\t\"repr.brace\": Style.parse(\"bold\"),\n});\n","import stringWidth from \"string-width\";\nimport type { Console } from \"../console/console\";\nimport type { ConsoleOptions } from \"../types/console-options\";\nimport type { Renderable, RenderResult } from \"../types/renderable\";\nimport { Style } from \"./style\";\n\n/**\n * A segment of text with a specific style.\n */\nexport class Segment implements Renderable {\n\tconstructor(\n\t\tpublic readonly text: string,\n\t\tpublic readonly style: Style = Style.null(),\n\t\tpublic readonly isControl: boolean = false,\n\t) {}\n\n\t/**\n\t * Implementation of Renderable protocol.\n\t */\n\t__rich_console__(_console: Console, _options: ConsoleOptions): RenderResult {\n\t\treturn {\n\t\t\tsegments: [this],\n\t\t\twidth: this.cellLength(),\n\t\t};\n\t}\n\n\t/**\n\t * Calculates the cell length of the text.\n\t */\n\tcellLength(): number {\n\t\tif (this.isControl) return 0;\n\t\treturn stringWidth(this.text);\n\t}\n\n\t/**\n\t * Renders the segment to an ANSI string.\n\t */\n\trender(): string {\n\t\tif (this.isControl) return this.text;\n\t\tif (typeof this.style?.render === \"function\") {\n\t\t\treturn this.style.render(this.text);\n\t\t}\n\t\treturn this.text;\n\t}\n\n\t/**\n\t * Splits the segment into lines.\n\t */\n\tsplitLines(_allowEmpty: boolean = false): Segment[][] {\n\t\tconst lines = this.text.split(\"\\n\");\n\n\t\t// If the text ends with a newline, split produces an empty string at the end.\n\t\t// Rich behavior: we might want to preserve that if needed, or handle it carefully.\n\n\t\treturn lines.map((line) => {\n\t\t\t// If line is empty and we don't allow empty segments (unless it's a newline itself which is lost here),\n\t\t\t// effectively we just create new segments for each line part.\n\t\t\treturn [new Segment(line, this.style, this.isControl)];\n\t\t});\n\t}\n\n\t/**\n\t * Creates a new Segment with modified properties.\n\t */\n\tclone(text?: string, style?: Style, isControl?: boolean): Segment {\n\t\treturn new Segment(\n\t\t\ttext ?? this.text,\n\t\t\tstyle ?? this.style,\n\t\t\tisControl ?? this.isControl,\n\t\t);\n\t}\n}\n","import { DEFAULT_THEME, type Theme } from \"../themes/theme\";\nimport { Segment } from \"./segment\";\nimport { Style } from \"./style\";\n\n/**\n * Parses Rich markup into segments.\n * Example: \"[bold red]Hello[/bold red] [green]World[/green]\"\n */\nexport class MarkupParser {\n\t// Regex that matches standard tags [tag] and closing tags [/] or [/tag]\n\t// We use a non-greedy match for content inside brackets\n\tprivate static readonly TAG_REGEX = /\\[(\\/)?([\\w\\s#.,()]*?)\\]/g;\n\n\tprivate theme: Theme;\n\n\tconstructor(theme?: Theme) {\n\t\tthis.theme = theme ?? DEFAULT_THEME;\n\t}\n\n\tparse(markup: string): Segment[] {\n\t\tconst segments: Segment[] = [];\n\t\tconst styleStack: Style[] = [Style.null()];\n\t\tlet lastIndex = 0;\n\t\tlet match: RegExpExecArray | null;\n\n\t\t// Reset regex lastIndex because it's static\n\t\tMarkupParser.TAG_REGEX.lastIndex = 0;\n\n\t\twhile ((match = MarkupParser.TAG_REGEX.exec(markup)) !== null) {\n\t\t\tconst fullMatch = match[0];\n\t\t\tconst isClosing = !!match[1];\n\t\t\tconst tagContent = match[2];\n\t\t\tconst index = match.index;\n\n\t\t\t// Ignore empty tags []\n\t\t\tif (!isClosing && !tagContent) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// Add text before the tag\n\t\t\tif (index > lastIndex) {\n\t\t\t\tconst text = markup.substring(lastIndex, index);\n\t\t\t\tsegments.push(new Segment(text, styleStack[styleStack.length - 1]));\n\t\t\t}\n\n\t\t\tif (isClosing) {\n\t\t\t\t// Closing tag - for now we just pop regardless of name matching\n\t\t\t\tif (styleStack.length > 1) {\n\t\t\t\t\tstyleStack.pop();\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Opening tag\n\t\t\t\tconst currentStyle = styleStack[styleStack.length - 1];\n\n\t\t\t\t// Resolve style: check theme first, then parse\n\t\t\t\tlet nextStyle = this.theme.get(tagContent);\n\t\t\t\tif (nextStyle === Style.null() && !this.theme.styles[tagContent]) {\n\t\t\t\t\t// Not in theme, parse as raw style\n\t\t\t\t\tnextStyle = Style.parse(tagContent);\n\t\t\t\t} else if (this.theme.styles[tagContent]) {\n\t\t\t\t\t// It was found in theme\n\t\t\t\t}\n\n\t\t\t\t// Wait, theme.get returns Style.null() if not found.\n\t\t\t\t// But Style.null() is a valid return for \"none\" theme key.\n\t\t\t\t// We need to know if it was ACTUALLY found.\n\t\t\t\t// Let's improve logic:\n\n\t\t\t\t// Try simple parse if it looks like a complex style string (spaces)\n\t\t\t\tif (tagContent.includes(\" \")) {\n\t\t\t\t\tnextStyle = Style.parse(tagContent);\n\t\t\t\t} else {\n\t\t\t\t\tconst themeStyle = this.theme.styles[tagContent];\n\t\t\t\t\tif (themeStyle) {\n\t\t\t\t\t\tnextStyle =\n\t\t\t\t\t\t\ttypeof themeStyle === \"string\"\n\t\t\t\t\t\t\t\t? Style.parse(themeStyle)\n\t\t\t\t\t\t\t\t: themeStyle;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tnextStyle = Style.parse(tagContent);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tconst newStyle = currentStyle.combine(nextStyle);\n\t\t\t\tstyleStack.push(newStyle);\n\t\t\t}\n\n\t\t\tlastIndex = index + fullMatch.length;\n\t\t}\n\n\t\t// Add remaining text\n\t\tif (lastIndex < markup.length) {\n\t\t\tconst text = markup.substring(lastIndex);\n\t\t\tsegments.push(new Segment(text, styleStack[styleStack.length - 1]));\n\t\t}\n\n\t\treturn segments.filter((s) => s.text.length > 0);\n\t}\n}\n","import type { Console } from \"../console/console\";\nimport type { Segment } from \"../core/segment\";\nimport type { ConsoleOptions } from \"./console-options\";\n\n/**\n * Result of rendering a Renderable object.\n */\nexport interface RenderResult {\n\t/** The rendered text segments */\n\tsegments: Segment[];\n\t/** The width in characters */\n\twidth?: number;\n\t/** The height in lines */\n\theight?: number;\n}\n\n/**\n * Protocol for objects that can be rendered to the console.\n */\nexport interface Renderable {\n\t/**\n\t * Renders the object to segments.\n\t *\n\t * @param console - The console instance\n\t * @param options - Rendering options\n\t * @returns The render result\n\t */\n\t__rich_console__(\n\t\tconsole: Console,\n\t\toptions: ConsoleOptions,\n\t): RenderResult | Generator<Segment>;\n}\n\n/**\n * Type guard to check if an object is renderable.\n */\nexport function isRenderable(obj: unknown): obj is Renderable {\n\treturn (\n\t\ttypeof obj === \"object\" &&\n\t\tobj !== null &&\n\t\t\"__rich_console__\" in obj &&\n\t\t// biome-ignore lint/suspicious/noExplicitAny: Type guard check\n\t\ttypeof (obj as any).__rich_console__ === \"function\"\n\t);\n}\n","export interface StackFrame {\n\tfunctionName: string;\n\tfilePath: string;\n\tlineNumber: number;\n\tcolumnNumber: number;\n}\n\nexport namespace Trace {\n\texport function parse(error: Error): StackFrame[] {\n\t\tif (!error.stack) return [];\n\n\t\tconst lines = error.stack.split(\"\\n\");\n\t\tconst frames: StackFrame[] = [];\n\n\t\t// Skip the first line (error message)\n\t\tfor (let i = 1; i < lines.length; i++) {\n\t\t\tconst line = lines[i].trim();\n\t\t\tif (!line.startsWith(\"at \")) continue;\n\n\t\t\t// Parse lines like: \"at functionName (filePath:line:col)\"\n\t\t\t// or \"at filePath:line:col\"\n\n\t\t\tlet functionName = \"\";\n\t\t\tlet location = \"\";\n\n\t\t\tif (line.includes(\"(\")) {\n\t\t\t\tconst parts = line.substring(3).split(\" (\");\n\t\t\t\tfunctionName = parts[0];\n\t\t\t\tlocation = parts[1].slice(0, -1); // remove closing paren\n\t\t\t} else {\n\t\t\t\tlocation = line.substring(3);\n\t\t\t}\n\n\t\t\tconst locParts = location.split(\":\");\n\t\t\tconst columnNumber = parseInt(locParts.pop() || \"0\", 10);\n\t\t\tconst lineNumber = parseInt(locParts.pop() || \"0\", 10);\n\t\t\tconst filePath = locParts.join(\":\");\n\n\t\t\tframes.push({\n\t\t\t\tfunctionName: functionName || \"<anonymous>\",\n\t\t\t\tfilePath,\n\t\t\t\tlineNumber,\n\t\t\t\tcolumnNumber,\n\t\t\t});\n\t\t}\n\n\t\treturn frames;\n\t}\n}\n","import { Style } from \"../core/style\";\n\nexport interface SyntaxTheme {\n\tname: string;\n\tstyles: Record<string, Style>;\n\tbackground?: string;\n}\n\n// Monokai theme - classic dark theme inspired by Sublime Text\nexport const MONOKAI: SyntaxTheme = {\n\tname: \"monokai\",\n\tbackground: \"#272822\",\n\tstyles: {\n\t\t// Keywords and control flow\n\t\tkeyword: Style.parse(\"#f92672 bold\"),\n\t\tbuilt_in: Style.parse(\"#66d9ef\"),\n\t\ttype: Style.parse(\"#66d9ef italic\"),\n\t\tliteral: Style.parse(\"#ae81ff\"),\n\n\t\t// Values\n\t\tnumber: Style.parse(\"#ae81ff\"),\n\t\tstring: Style.parse(\"#e6db74\"),\n\t\tregexp: Style.parse(\"#e6db74\"),\n\t\tsymbol: Style.parse(\"#ae81ff\"),\n\n\t\t// Comments and docs\n\t\tcomment: Style.parse(\"#75715e dim\"),\n\t\tdoctag: Style.parse(\"#75715e\"),\n\t\tmeta: Style.parse(\"#75715e\"),\n\n\t\t// Functions and classes\n\t\tfunction: Style.parse(\"#a6e22e\"),\n\t\ttitle: Style.parse(\"#a6e22e\"),\n\t\t\"title.function\": Style.parse(\"#a6e22e\"),\n\t\t\"title.class\": Style.parse(\"#a6e22e italic\"),\n\t\t\"title.class.inherited\": Style.parse(\"#a6e22e\"),\n\n\t\t// Variables and parameters\n\t\tparams: Style.parse(\"#fd971f italic\"),\n\t\tvariable: Style.parse(\"#f8f8f2\"),\n\t\t\"variable.language\": Style.parse(\"#fd971f\"),\n\t\t\"variable.constant\": Style.parse(\"#ae81ff\"),\n\n\t\t// Properties and attributes\n\t\tproperty: Style.parse(\"#66d9ef\"),\n\t\tattr: Style.parse(\"#a6e22e\"),\n\t\tattribute: Style.parse(\"#a6e22e\"),\n\n\t\t// Operators and punctuation\n\t\toperator: Style.parse(\"#f92672\"),\n\t\tpunctuation: Style.parse(\"#f8f8f2\"),\n\n\t\t// Misc\n\t\ttag: Style.parse(\"#f92672\"),\n\t\tname: Style.parse(\"#a6e22e\"),\n\t\t\"selector-tag\": Style.parse(\"#f92672\"),\n\t\t\"selector-class\": Style.parse(\"#a6e22e\"),\n\t\t\"selector-id\": Style.parse(\"#a6e22e\"),\n\n\t\t// Template literals\n\t\t\"template-variable\": Style.parse(\"#e6db74\"),\n\t\t\"template-tag\": Style.parse(\"#f92672\"),\n\t\tsubst: Style.parse(\"#f8f8f2\"),\n\t},\n};\n\n// Dracula theme - popular dark theme\nexport const DRACULA: SyntaxTheme = {\n\tname: \"dracula\",\n\tbackground: \"#282a36\",\n\tstyles: {\n\t\tkeyword: Style.parse(\"#ff79c6 bold\"),\n\t\tbuilt_in: Style.parse(\"#8be9fd\"),\n\t\ttype: Style.parse(\"#8be9fd italic\"),\n\t\tliteral: Style.parse(\"#bd93f9\"),\n\t\tnumber: Style.parse(\"#bd93f9\"),\n\t\tstring: Style.parse(\"#f1fa8c\"),\n\t\tregexp: Style.parse(\"#f1fa8c\"),\n\t\tcomment: Style.parse(\"#6272a4 dim\"),\n\t\tfunction: Style.parse(\"#50fa7b\"),\n\t\ttitle: Style.parse(\"#50fa7b\"),\n\t\t\"title.function\": Style.parse(\"#50fa7b\"),\n\t\t\"title.class\": Style.parse(\"#50fa7b italic\"),\n\t\tparams: Style.parse(\"#ffb86c italic\"),\n\t\tvariable: Style.parse(\"#f8f8f2\"),\n\t\tproperty: Style.parse(\"#8be9fd\"),\n\t\tattr: Style.parse(\"#50fa7b\"),\n\t\toperator: Style.parse(\"#ff79c6\"),\n\t\ttag: Style.parse(\"#ff79c6\"),\n\t},\n};\n\n// GitHub Light theme\nexport const GITHUB_LIGHT: SyntaxTheme = {\n\tname: \"github\",\n\tstyles: {\n\t\tkeyword: Style.parse(\"#d73a49 bold\"),\n\t\tbuilt_in: Style.parse(\"#005cc5\"),\n\t\ttype: Style.parse(\"#005cc5\"),\n\t\tliteral: Style.parse(\"#005cc5\"),\n\t\tnumber: Style.parse(\"#005cc5\"),\n\t\tstring: Style.parse(\"#032f62\"),\n\t\tregexp: Style.parse(\"#032f62\"),\n\t\tcomment: Style.parse(\"#6a737d dim\"),\n\t\tfunction: Style.parse(\"#6f42c1\"),\n\t\ttitle: Style.parse(\"#6f42c1\"),\n\t\t\"title.function\": Style.parse(\"#6f42c1\"),\n\t\t\"title.class\": Style.parse(\"#6f42c1 bold\"),\n\t\tparams: Style.parse(\"#24292e\"),\n\t\tvariable: Style.parse(\"#24292e\"),\n\t\tproperty: Style.parse(\"#005cc5\"),\n\t\tattr: Style.parse(\"#6f42c1\"),\n\t\toperator: Style.parse(\"#d73a49\"),\n\t\ttag: Style.parse(\"#22863a\"),\n\t},\n};\n\n// One Dark theme (Atom)\nexport const ONE_DARK: SyntaxTheme = {\n\tname: \"one-dark\",\n\tbackground: \"#282c34\",\n\tstyles: {\n\t\tkeyword: Style.parse(\"#c678dd bold\"),\n\t\tbuilt_in: Style.parse(\"#e5c07b\"),\n\t\ttype: Style.parse(\"#e5c07b italic\"),\n\t\tliteral: Style.parse(\"#d19a66\"),\n\t\tnumber: Style.parse(\"#d19a66\"),\n\t\tstring: Style.parse(\"#98c379\"),\n\t\tregexp: Style.parse(\"#98c379\"),\n\t\tcomment: Style.parse(\"#5c6370 dim\"),\n\t\tfunction: Style.parse(\"#61afef\"),\n\t\ttitle: Style.parse(\"#61afef\"),\n\t\t\"title.function\": Style.parse(\"#61afef\"),\n\t\t\"title.class\": Style.parse(\"#e5c07b bold\"),\n\t\tparams: Style.parse(\"#abb2bf italic\"),\n\t\tvariable: Style.parse(\"#e06c75\"),\n\t\tproperty: Style.parse(\"#e06c75\"),\n\t\tattr: Style.parse(\"#d19a66\"),\n\t\toperator: Style.parse(\"#56b6c2\"),\n\t\ttag: Style.parse(\"#e06c75\"),\n\t},\n};\n\n// Theme registry\nexport const SYNTAX_THEMES: Record<string, SyntaxTheme> = {\n\tmonokai: MONOKAI,\n\tdracula: DRACULA,\n\tgithub: GITHUB_LIGHT,\n\t\"github-light\": GITHUB_LIGHT,\n\t\"one-dark\": ONE_DARK,\n\tatom: ONE_DARK,\n};\n\nexport function getTheme(name: string): SyntaxTheme {\n\treturn SYNTAX_THEMES[name] ?? MONOKAI;\n}\n\n// Legacy export for backwards compatibility\nexport const MONOKAI_THEME = {\n\tkeyword: Style.parse(\"bold magenta\"),\n\tstring: Style.parse(\"yellow\"),\n\tnumber: Style.parse(\"magenta\"),\n\tcomment: Style.parse(\"dim white\"),\n\toperator: Style.parse(\"bold white\"),\n\tfunction: Style.parse(\"green\"),\n\tclass: Style.parse(\"bold blue\"),\n\ttitle: Style.parse(\"bold white\"),\n};\n","/** biome-ignore-all assist/source/organizeImports: false */\nimport hljs, { type HighlightResult } from \"highlight.js\";\nimport type { Console } from \"../console/console\";\nimport type { ConsoleOptions } from \"../types/console-options\";\nimport type { Renderable, RenderResult } from \"../types/renderable\";\nimport { Segment } from \"../core/segment\";\nimport { Style } from \"../core/style\";\nimport { getTheme, type SyntaxTheme } from \"./theme\";\nimport stringWidth from \"string-width\";\n\nexport interface SyntaxOptions {\n\ttheme?: string;\n\tlineNumbers?: boolean;\n\tstartLine?: number;\n\thighlightLines?: number[]; // Lines to highlight (e.g., error lines)\n\twordWrap?: boolean;\n}\n\n/**\n * Syntax highlighted code renderable.\n * Uses highlight.js for tokenization and applies Rich-style themes.\n */\nexport class Syntax implements Renderable {\n\tprivate readonly syntaxTheme: SyntaxTheme;\n\n\tconstructor(\n\t\tpublic readonly code: string,\n\t\tpublic readonly lexer: string,\n\t\tpublic readonly options: SyntaxOptions = {},\n\t) {\n\t\tthis.syntaxTheme = getTheme(options.theme ?? \"monokai\");\n\t}\n\n\t/**\n\t * Create Syntax from a file path (convenience method).\n\t */\n\tstatic fromPath(filePath: string, options: SyntaxOptions = {}): Syntax {\n\t\tconst fs = require(\"node:fs\");\n\t\tconst path = require(\"node:path\");\n\t\tconst code = fs.readFileSync(filePath, \"utf-8\");\n\t\tconst ext = path.extname(filePath).slice(1);\n\n\t\t// Map common extensions to highlight.js lexer names\n\t\tconst lexerMap: Record<string, string> = {\n\t\t\tts: \"typescript\",\n\t\t\ttsx: \"typescript\",\n\t\t\tjs: \"javascript\",\n\t\t\tjsx: \"javascript\",\n\t\t\tpy: \"python\",\n\t\t\trb: \"ruby\",\n\t\t\trs: \"rust\",\n\t\t\tgo: \"go\",\n\t\t\tjava: \"java\",\n\t\t\tcpp: \"cpp\",\n\t\t\tc: \"c\",\n\t\t\th: \"c\",\n\t\t\thpp: \"cpp\",\n\t\t\tcs: \"csharp\",\n\t\t\tphp: \"php\",\n\t\t\tsh: \"bash\",\n\t\t\tbash: \"bash\",\n\t\t\tzsh: \"bash\",\n\t\t\tmd: \"markdown\",\n\t\t\tjson: \"json\",\n\t\t\tyaml: \"yaml\",\n\t\t\tyml: \"yaml\",\n\t\t\ttoml: \"ini\",\n\t\t\tcss: \"css\",\n\t\t\tscss: \"scss\",\n\t\t\thtml: \"html\",\n\t\t\txml: \"xml\",\n\t\t\tsql: \"sql\",\n\t\t};\n\n\t\tconst lexer = lexerMap[ext] ?? ext;\n\t\treturn new Syntax(code, lexer, options);\n\t}\n\n\t__rich_console__(_console: Console, _options: ConsoleOptions): RenderResult {\n\t\tconst segments: Segment[] = [];\n\t\tconst startLine = this.options.startLine ?? 1;\n\t\tconst showLineNumbers = this.options.lineNumbers ?? false;\n\t\tconst highlightLines = new Set(this.options.highlightLines ?? []);\n\n\t\t// Highlight the code\n\t\tlet highlighted: HighlightResult;\n\t\ttry {\n\t\t\thighlighted = hljs.highlight(this.code, { language: this.lexer });\n\t\t} catch {\n\t\t\t// Fallback if language not found\n\t\t\thighlighted = hljs.highlightAuto(this.code);\n\t\t}\n\n\t\t// Parse highlighted HTML into tokens\n\t\tconst tokens = this.parseHighlightedHtml(highlighted.value);\n\n\t\t// Group tokens by line\n\t\tconst lines = this.groupTokensByLine(tokens);\n\n\t\t// Calculate line number width\n\t\tconst lastLineNumber = startLine + lines.length - 1;\n\t\tconst lineNumberWidth = showLineNumbers\n\t\t\t? String(lastLineNumber).length + 1\n\t\t\t: 0;\n\n\t\tlet maxWidth = 0;\n\n\t\tlines.forEach((lineTokens, i) => {\n\t\t\tconst lineNumber = startLine + i;\n\t\t\tconst isHighlighted = highlightLines.has(lineNumber);\n\n\t\t\t// Error line indicator\n\t\t\tif (isHighlighted) {\n\t\t\t\tsegments.push(new Segment(\" \", Style.parse(\"#ff5555 bold\")));\n\t\t\t} else if (showLineNumbers) {\n\t\t\t\tsegments.push(new Segment(\"  \", Style.null()));\n\t\t\t}\n\n\t\t\t// Line number\n\t\t\tif (showLineNumbers) {\n\t\t\t\tconst lineNumStr = String(lineNumber).padStart(lineNumberWidth - 1);\n\t\t\t\tconst lineNumStyle = isHighlighted\n\t\t\t\t\t? Style.parse(\"#ff5555 bold\")\n\t\t\t\t\t: Style.parse(\"#6e7681 dim\");\n\t\t\t\tsegments.push(new Segment(`${lineNumStr}  `, lineNumStyle));\n\t\t\t}\n\n\t\t\t// Line content with syntax highlighting\n\t\t\tlet lineWidth = 0;\n\t\t\tfor (const token of lineTokens) {\n\t\t\t\t// Apply highlight background for error lines\n\t\t\t\tlet style = token.style;\n\t\t\t\tif (isHighlighted) {\n\t\t\t\t\tstyle = style.combine(Style.parse(\"on #3a1d1d\"));\n\t\t\t\t}\n\t\t\t\tsegments.push(new Segment(token.text, style));\n\t\t\t\tlineWidth += stringWidth(token.text);\n\t\t\t}\n\n\t\t\tsegments.push(new Segment(\"\\n\", Style.null(), true));\n\n\t\t\tconst totalLineWidth =\n\t\t\t\tlineWidth + (showLineNumbers ? lineNumberWidth + 5 : 0);\n\t\t\tif (totalLineWidth > maxWidth) maxWidth = totalLineWidth;\n\t\t});\n\n\t\treturn {\n\t\t\tsegments,\n\t\t\twidth: maxWidth,\n\t\t};\n\t}\n\n\t/**\n\t * Parse highlight.js HTML output into styled tokens.\n\t */\n\tprivate parseHighlightedHtml(\n\t\thtml: string,\n\t): Array<{ text: string; style: Style }> {\n\t\tconst tokens: Array<{ text: string; style: Style }> = [];\n\n\t\t// Recursive parser for nested spans\n\n\t\t// Regex to match HTML tags and text is inlined in openMatch below\n\n\t\tconst processHtml = (input: string, inheritedScope: string[] = []) => {\n\t\t\t// Simple recursive descent parser for nested spans\n\t\t\tlet remaining = input;\n\n\t\t\twhile (remaining.length > 0) {\n\t\t\t\t// Check for opening span\n\t\t\t\tconst openMatch = remaining.match(/^<span class=\"hljs-([^\"]+)\">/);\n\t\t\t\tif (openMatch) {\n\t\t\t\t\tremaining = remaining.slice(openMatch[0].length);\n\t\t\t\t\tconst scope = openMatch[1];\n\n\t\t\t\t\t// Find matching closing tag (handling nesting)\n\t\t\t\t\tlet depth = 1;\n\t\t\t\t\tlet innerEnd = 0;\n\t\t\t\t\tfor (let i = 0; i < remaining.length; i++) {\n\t\t\t\t\t\tif (remaining.slice(i).startsWith(\"<span\")) {\n\t\t\t\t\t\t\tdepth++;\n\t\t\t\t\t\t} else if (remaining.slice(i).startsWith(\"</span>\")) {\n\t\t\t\t\t\t\tdepth--;\n\t\t\t\t\t\t\tif (depth === 0) {\n\t\t\t\t\t\t\t\tinnerEnd = i;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tconst innerContent = remaining.slice(0, innerEnd);\n\t\t\t\t\tremaining = remaining.slice(innerEnd + \"</span>\".length);\n\n\t\t\t\t\t// Process inner content with updated scope\n\t\t\t\t\tconst newScope = [...inheritedScope, scope];\n\t\t\t\t\tprocessHtml(innerContent, newScope);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// Check for text content\n\t\t\t\tconst textMatch = remaining.match(/^([^<]+)/);\n\t\t\t\tif (textMatch) {\n\t\t\t\t\tconst text = this.decodeHtmlEntities(textMatch[1]);\n\t\t\t\t\tconst scope = inheritedScope[inheritedScope.length - 1] ?? \"\";\n\t\t\t\t\tconst style = this.getStyleForScope(scope);\n\t\t\t\t\ttokens.push({ text, style });\n\t\t\t\t\tremaining = remaining.slice(textMatch[0].length);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// Skip any other tags\n\t\t\t\tconst tagMatch = remaining.match(/^<[^>]+>/);\n\t\t\t\tif (tagMatch) {\n\t\t\t\t\tremaining = remaining.slice(tagMatch[0].length);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// Safety: if nothing matches, consume one character\n\t\t\t\tif (remaining.length > 0) {\n\t\t\t\t\ttokens.push({ text: remaining[0], style: Style.null() });\n\t\t\t\t\tremaining = remaining.slice(1);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tprocessHtml(html);\n\t\treturn tokens;\n\t}\n\n\t/**\n\t * Decode HTML entities to their character equivalents.\n\t */\n\tprivate decodeHtmlEntities(text: string): string {\n\t\treturn text\n\t\t\t.replace(/&lt;/g, \"<\")\n\t\t\t.replace(/&gt;/g, \">\")\n\t\t\t.replace(/&amp;/g, \"&\")\n\t\t\t.replace(/&quot;/g, '\"')\n\t\t\t.replace(/&#x27;/g, \"'\")\n\t\t\t.replace(/&#39;/g, \"'\")\n\t\t\t.replace(/&nbsp;/g, \" \");\n\t}\n\n\t/**\n\t * Get style for a highlight.js scope/class.\n\t */\n\tprivate getStyleForScope(scope: string): Style {\n\t\tif (!scope) return Style.null();\n\n\t\t// Try exact match first\n\t\tif (this.syntaxTheme.styles[scope]) {\n\t\t\treturn this.syntaxTheme.styles[scope];\n\t\t}\n\n\t\t// Try parent scope (e.g., 'title.function' -> 'title')\n\t\tconst parts = scope.split(\".\");\n\t\tfor (let i = parts.length - 1; i >= 0; i--) {\n\t\t\tconst partialScope = parts.slice(0, i + 1).join(\".\");\n\t\t\tif (this.syntaxTheme.styles[partialScope]) {\n\t\t\t\treturn this.syntaxTheme.styles[partialScope];\n\t\t\t}\n\t\t}\n\n\t\t// Try first part only\n\t\tif (this.syntaxTheme.styles[parts[0]]) {\n\t\t\treturn this.syntaxTheme.styles[parts[0]];\n\t\t}\n\n\t\treturn Style.null();\n\t}\n\n\t/**\n\t * Group tokens by line (split on newlines).\n\t */\n\tprivate groupTokensByLine(\n\t\ttokens: Array<{ text: string; style: Style }>,\n\t): Array<Array<{ text: string; style: Style }>> {\n\t\tconst lines: Array<Array<{ text: string; style: Style }>> = [[]];\n\n\t\tfor (const token of tokens) {\n\t\t\tconst parts = token.text.split(\"\\n\");\n\n\t\t\tfor (let i = 0; i < parts.length; i++) {\n\t\t\t\tif (i > 0) {\n\t\t\t\t\tlines.push([]);\n\t\t\t\t}\n\t\t\t\tif (parts[i]) {\n\t\t\t\t\tlines[lines.length - 1].push({ text: parts[i], style: token.style });\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn lines;\n\t}\n}\n","/** biome-ignore-all assist/source/organizeImports: false */\nimport fs from \"node:fs\";\nimport { Console } from \"../console/console\";\nimport type { ConsoleOptions } from \"../types/console-options\";\nimport type { Renderable, RenderResult } from \"../types/renderable\";\nimport { Segment } from \"../core/segment\";\nimport { Style } from \"../core/style\";\nimport { Trace, type StackFrame } from \"./trace\";\nimport { Syntax } from \"../syntax/syntax\";\n\nexport interface TracebackOptions {\n\tshowLocals?: boolean;\n\textraLines?: number;\n\ttheme?: string;\n\tsuppressInternal?: boolean;\n\tmaxFrames?: number;\n}\n\n/**\n * Beautiful error traceback rendering.\n * Displays syntax-highlighted stack traces with optional local variables.\n */\nexport class Traceback implements Renderable {\n\tprivate frames: StackFrame[];\n\n\tconstructor(\n\t\tpublic readonly error: Error,\n\t\tpublic readonly options: TracebackOptions = {},\n\t) {\n\t\tthis.frames = Trace.parse(error);\n\t}\n\n\t__rich_console__(\n\t\tconsole: Console,\n\t\tconsoleOptions: ConsoleOptions,\n\t): RenderResult {\n\t\tconst segments: Segment[] = [];\n\t\tconst extraLines = this.options.extraLines ?? 3;\n\t\tconst theme = this.options.theme ?? \"monokai\";\n\t\tconst suppressInternal = this.options.suppressInternal ?? true;\n\t\tconst maxFrames = this.options.maxFrames ?? 100;\n\t\tconst width = consoleOptions.width ?? console.width;\n\n\t\t// Header: \"Traceback (most recent call last)\"\n\t\tsegments.push(new Segment(\"\\n\", Style.null(), true));\n\t\tconst headerStyle = Style.parse(\"#ff5555 bold\");\n\t\tsegments.push(new Segment(\"Traceback\", headerStyle));\n\t\tsegments.push(\n\t\t\tnew Segment(\" (most recent call last)\\n\", Style.parse(\"dim\")),\n\t\t);\n\t\tsegments.push(new Segment(\"\\n\", Style.null(), true));\n\n\t\t// Filter and limit frames\n\t\tlet filteredFrames = this.frames;\n\t\tif (suppressInternal) {\n\t\t\tfilteredFrames = filteredFrames.filter(\n\t\t\t\t(f) =>\n\t\t\t\t\t!f.filePath.startsWith(\"node:\") &&\n\t\t\t\t\t!f.filePath.includes(\"node_modules\"),\n\t\t\t);\n\t\t}\n\t\tfilteredFrames = filteredFrames.slice(0, maxFrames);\n\n\t\t// Render each frame\n\t\tfor (const frame of filteredFrames) {\n\t\t\t// Frame header: File \"path\", line X, in functionName\n\t\t\tconst frameHeaderStyle = Style.parse(\"#6e7681\");\n\t\t\tsegments.push(new Segment(\"  File \", frameHeaderStyle));\n\t\t\tsegments.push(new Segment(`\"${frame.filePath}\"`, Style.parse(\"#61afef\")));\n\t\t\tsegments.push(new Segment(\", line \", frameHeaderStyle));\n\t\t\tsegments.push(\n\t\t\t\tnew Segment(String(frame.lineNumber), Style.parse(\"#e5c07b bold\")),\n\t\t\t);\n\t\t\tsegments.push(new Segment(\", in \", frameHeaderStyle));\n\t\t\tsegments.push(\n\t\t\t\tnew Segment(frame.functionName, Style.parse(\"#98c379 italic\")),\n\t\t\t);\n\t\t\tsegments.push(new Segment(\"\\n\", Style.null(), true));\n\n\t\t\t// Code snippet\n\t\t\tlet codeSnippet = \"\";\n\t\t\ttry {\n\t\t\t\tif (fs.existsSync(frame.filePath)) {\n\t\t\t\t\tconst content = fs.readFileSync(frame.filePath, \"utf-8\");\n\t\t\t\t\tconst lines = content.split(\"\\n\");\n\t\t\t\t\tconst start = Math.max(0, frame.lineNumber - extraLines - 1);\n\t\t\t\t\tconst end = Math.min(lines.length, frame.lineNumber + extraLines);\n\t\t\t\t\tcodeSnippet = lines.slice(start, end).join(\"\\n\");\n\n\t\t\t\t\t// Detect language from file extension\n\t\t\t\t\tconst ext = frame.filePath.split(\".\").pop() ?? \"txt\";\n\t\t\t\t\tconst lexerMap: Record<string, string> = {\n\t\t\t\t\t\tts: \"typescript\",\n\t\t\t\t\t\ttsx: \"typescript\",\n\t\t\t\t\t\tjs: \"javascript\",\n\t\t\t\t\t\tjsx: \"javascript\",\n\t\t\t\t\t\tpy: \"python\",\n\t\t\t\t\t\trb: \"ruby\",\n\t\t\t\t\t\trs: \"rust\",\n\t\t\t\t\t\tgo: \"go\",\n\t\t\t\t\t};\n\t\t\t\t\tconst lexer = lexerMap[ext] ?? ext;\n\n\t\t\t\t\t// Create syntax highlighter with error line highlighted\n\t\t\t\t\tconst syntax = new Syntax(codeSnippet, lexer, {\n\t\t\t\t\t\ttheme,\n\t\t\t\t\t\tlineNumbers: true,\n\t\t\t\t\t\tstartLine: start + 1,\n\t\t\t\t\t\thighlightLines: [frame.lineNumber],\n\t\t\t\t\t});\n\n\t\t\t\t\t// Render the syntax block\n\t\t\t\t\tconst syntaxResult = syntax.__rich_console__(console, {\n\t\t\t\t\t\t...consoleOptions,\n\t\t\t\t\t\twidth: width - 4,\n\t\t\t\t\t});\n\n\t\t\t\t\t// Indent the code block\n\t\t\t\t\tsegments.push(new Segment(\"\\n\", Style.null(), true));\n\t\t\t\t\tfor (const seg of syntaxResult.segments) {\n\t\t\t\t\t\tif (seg.isControl && seg.text === \"\\n\") {\n\t\t\t\t\t\t\tsegments.push(seg);\n\t\t\t\t\t\t\tsegments.push(new Segment(\"    \")); // Indent each line\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tsegments.push(seg);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} catch {\n\t\t\t\t// If file can't be read, show a placeholder\n\t\t\t\tsegments.push(new Segment(\"    \", Style.null()));\n\t\t\t\tsegments.push(\n\t\t\t\t\tnew Segment(\"[source not available]\", Style.parse(\"dim italic\")),\n\t\t\t\t);\n\t\t\t\tsegments.push(new Segment(\"\\n\", Style.null(), true));\n\t\t\t}\n\n\t\t\tsegments.push(new Segment(\"\\n\", Style.null(), true));\n\t\t}\n\n\t\t// Error message at the bottom\n\t\tconst errorNameStyle = Style.parse(\"#ff5555 bold\");\n\t\tconst errorMsgStyle = Style.parse(\"#ff5555\");\n\n\t\tsegments.push(new Segment(this.error.name, errorNameStyle));\n\t\tsegments.push(new Segment(\": \", Style.parse(\"dim\")));\n\t\tsegments.push(new Segment(this.error.message, errorMsgStyle));\n\t\tsegments.push(new Segment(\"\\n\", Style.null(), true));\n\n\t\treturn { segments, width };\n\t}\n}\n\n/**\n * Install Rich traceback handler as the default for uncaught exceptions.\n */\nexport function installTracebackHandler(options: TracebackOptions = {}): void {\n\tconst console = new Console();\n\n\tprocess.on(\"uncaughtException\", (error: Error) => {\n\t\tconst traceback = new Traceback(error, options);\n\t\tconsole.print(traceback);\n\t\tprocess.exit(1);\n\t});\n\n\tprocess.on(\"unhandledRejection\", (reason: unknown) => {\n\t\tconst error = reason instanceof Error ? reason : new Error(String(reason));\n\t\tconst traceback = new Traceback(error, options);\n\t\tconsole.print(traceback);\n\t\tprocess.exit(1);\n\t});\n}\n","import type { Console } from \"../console/console\";\nimport type { ConsoleOptions } from \"../types/console-options\";\nimport type { Renderable, RenderResult } from \"../types/renderable\";\n\nexport function getRenderResult(\n\trenderable: Renderable,\n\tconsole: Console,\n\toptions: ConsoleOptions,\n): RenderResult {\n\tconst result = renderable.__rich_console__(console, options);\n\tif (\"segments\" in result) {\n\t\treturn result;\n\t}\n\t// It's a generator\n\treturn {\n\t\tsegments: Array.from(result),\n\t\twidth: options.width, // approximation\n\t};\n}\n","/**\n * Spinner animation definitions\n * Ported from Python Rich / cli-spinners\n */\n\nexport interface SpinnerData {\n\tinterval: number; // milliseconds between frames\n\tframes: string[] | string; // animation frames\n}\n\nexport const SPINNERS: Record<string, SpinnerData> = {\n\tdots: {\n\t\tinterval: 80,\n\t\tframes: \"\",\n\t},\n\tdots2: {\n\t\tinterval: 80,\n\t\tframes: \"\",\n\t},\n\tdots3: {\n\t\tinterval: 80,\n\t\tframes: \"\",\n\t},\n\tline: {\n\t\tinterval: 130,\n\t\tframes: [\"-\", \"\\\\\", \"|\", \"/\"],\n\t},\n\tline2: {\n\t\tinterval: 100,\n\t\tframes: \"--\",\n\t},\n\tpipe: {\n\t\tinterval: 100,\n\t\tframes: \"\",\n\t},\n\tsimpleDots: {\n\t\tinterval: 400,\n\t\tframes: [\".  \", \".. \", \"...\", \"   \"],\n\t},\n\tsimpleDotsScrolling: {\n\t\tinterval: 200,\n\t\tframes: [\".  \", \".. \", \"...\", \" ..\", \"  .\", \"   \"],\n\t},\n\tstar: {\n\t\tinterval: 70,\n\t\tframes: \"\",\n\t},\n\tstar2: {\n\t\tinterval: 80,\n\t\tframes: \"+x*\",\n\t},\n\tflip: {\n\t\tinterval: 70,\n\t\tframes: \"___-``'-___\",\n\t},\n\thamburger: {\n\t\tinterval: 100,\n\t\tframes: \"\",\n\t},\n\tgrowVertical: {\n\t\tinterval: 120,\n\t\tframes: \"\",\n\t},\n\tgrowHorizontal: {\n\t\tinterval: 120,\n\t\tframes: \"\",\n\t},\n\tballoon: {\n\t\tinterval: 140,\n\t\tframes: \" .oO@* \",\n\t},\n\tballoon2: {\n\t\tinterval: 120,\n\t\tframes: \".oOOo.\",\n\t},\n\tnoise: {\n\t\tinterval: 100,\n\t\tframes: \"\",\n\t},\n\tbounce: {\n\t\tinterval: 120,\n\t\tframes: \"\",\n\t},\n\tboxBounce: {\n\t\tinterval: 120,\n\t\tframes: \"\",\n\t},\n\tboxBounce2: {\n\t\tinterval: 100,\n\t\tframes: \"\",\n\t},\n\ttriangle: {\n\t\tinterval: 50,\n\t\tframes: \"\",\n\t},\n\tarc: {\n\t\tinterval: 100,\n\t\tframes: \"\",\n\t},\n\tcircle: {\n\t\tinterval: 120,\n\t\tframes: \"\",\n\t},\n\tsquareCorners: {\n\t\tinterval: 180,\n\t\tframes: \"\",\n\t},\n\tcircleQuarters: {\n\t\tinterval: 120,\n\t\tframes: \"\",\n\t},\n\tcircleHalves: {\n\t\tinterval: 50,\n\t\tframes: \"\",\n\t},\n\ttoggle: {\n\t\tinterval: 250,\n\t\tframes: \"\",\n\t},\n\ttoggle2: {\n\t\tinterval: 80,\n\t\tframes: \"\",\n\t},\n\ttoggle3: {\n\t\tinterval: 120,\n\t\tframes: \"\",\n\t},\n\tarrow: {\n\t\tinterval: 100,\n\t\tframes: \"\",\n\t},\n\tarrow3: {\n\t\tinterval: 120,\n\t\tframes: [\"\", \"\", \"\", \"\", \"\", \"\"],\n\t},\n\tbouncingBar: {\n\t\tinterval: 80,\n\t\tframes: [\n\t\t\t\"[    ]\",\n\t\t\t\"[=   ]\",\n\t\t\t\"[==  ]\",\n\t\t\t\"[=== ]\",\n\t\t\t\"[ ===]\",\n\t\t\t\"[  ==]\",\n\t\t\t\"[   =]\",\n\t\t\t\"[    ]\",\n\t\t\t\"[   =]\",\n\t\t\t\"[  ==]\",\n\t\t\t\"[ ===]\",\n\t\t\t\"[====]\",\n\t\t\t\"[=== ]\",\n\t\t\t\"[==  ]\",\n\t\t\t\"[=   ]\",\n\t\t],\n\t},\n\tbouncingBall: {\n\t\tinterval: 80,\n\t\tframes: [\n\t\t\t\"(     )\",\n\t\t\t\"(     )\",\n\t\t\t\"(     )\",\n\t\t\t\"(     )\",\n\t\t\t\"(     )\",\n\t\t\t\"(     )\",\n\t\t\t\"(     )\",\n\t\t\t\"(     )\",\n\t\t\t\"(     )\",\n\t\t\t\"(     )\",\n\t\t],\n\t},\n\tsmiley: {\n\t\tinterval: 200,\n\t\tframes: [\" \", \" \"],\n\t},\n\tmonkey: {\n\t\tinterval: 300,\n\t\tframes: [\" \", \" \", \" \", \" \"],\n\t},\n\thearts: {\n\t\tinterval: 100,\n\t\tframes: [\" \", \" \", \" \", \" \", \" \"],\n\t},\n\tclock: {\n\t\tinterval: 100,\n\t\tframes: [\n\t\t\t\" \",\n\t\t\t\" \",\n\t\t\t\" \",\n\t\t\t\" \",\n\t\t\t\" \",\n\t\t\t\" \",\n\t\t\t\" \",\n\t\t\t\" \",\n\t\t\t\" \",\n\t\t\t\" \",\n\t\t\t\" \",\n\t\t\t\" \",\n\t\t],\n\t},\n\tearth: {\n\t\tinterval: 180,\n\t\tframes: [\" \", \" \", \" \"],\n\t},\n\tmoon: {\n\t\tinterval: 80,\n\t\tframes: [\" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \"],\n\t},\n\trunner: {\n\t\tinterval: 140,\n\t\tframes: [\" \", \" \"],\n\t},\n\tweather: {\n\t\tinterval: 100,\n\t\tframes: [\n\t\t\t\" \",\n\t\t\t\" \",\n\t\t\t\" \",\n\t\t\t\" \",\n\t\t\t\" \",\n\t\t\t\" \",\n\t\t\t\" \",\n\t\t\t\" \",\n\t\t\t\" \",\n\t\t\t\" \",\n\t\t\t\" \",\n\t\t\t\" \",\n\t\t\t\" \",\n\t\t\t\" \",\n\t\t],\n\t},\n\tchristmas: {\n\t\tinterval: 400,\n\t\tframes: \"\",\n\t},\n\tpoint: {\n\t\tinterval: 125,\n\t\tframes: [\"\", \"\", \"\", \"\", \"\"],\n\t},\n\tlayer: {\n\t\tinterval: 150,\n\t\tframes: \"-=\",\n\t},\n\taesthetic: {\n\t\tinterval: 80,\n\t\tframes: [\n\t\t\t\"\",\n\t\t\t\"\",\n\t\t\t\"\",\n\t\t\t\"\",\n\t\t\t\"\",\n\t\t\t\"\",\n\t\t\t\"\",\n\t\t\t\"\",\n\t\t],\n\t},\n};\n\n/**\n * Get spinner data by name\n */\nexport function getSpinner(name: string): SpinnerData | undefined {\n\treturn SPINNERS[name];\n}\n\n/**\n * List all available spinner names\n */\nexport function listSpinners(): string[] {\n\treturn Object.keys(SPINNERS);\n}\n","/**\n * Spinner renderable - animated spinners for status display\n */\n/** biome-ignore-all assist/source/organizeImports: false */\n\nimport type { Console } from \"../console/console\";\nimport type { ConsoleOptions } from \"../types/console-options\";\nimport type { Renderable, RenderResult } from \"../types/renderable\";\nimport { Segment } from \"../core/segment\";\nimport { Style } from \"../core/style\";\nimport { SPINNERS } from \"./spinners\";\n\nexport interface SpinnerOptions {\n\ttext?: string;\n\tstyle?: string;\n\tspeed?: number;\n}\n\n/**\n * A spinner animation that can be rendered with Live updates.\n */\nexport class Spinner implements Renderable {\n\treadonly name: string;\n\treadonly frames: string[];\n\treadonly interval: number;\n\ttext: string;\n\tstyle: string;\n\tspeed: number;\n\n\tprivate startTime: number | null = null;\n\tprivate frameNoOffset = 0;\n\n\tconstructor(name: string = \"dots\", options: SpinnerOptions = {}) {\n\t\tconst spinner = SPINNERS[name];\n\t\tif (!spinner) {\n\t\t\tthrow new Error(\n\t\t\t\t`No spinner called '${name}'. Use listSpinners() to see available spinners.`,\n\t\t\t);\n\t\t}\n\n\t\tthis.name = name;\n\t\tthis.frames =\n\t\t\ttypeof spinner.frames === \"string\"\n\t\t\t\t? [...spinner.frames]\n\t\t\t\t: [...spinner.frames];\n\t\tthis.interval = spinner.interval;\n\t\tthis.text = options.text ?? \"\";\n\t\tthis.style = options.style ?? \"green\";\n\t\tthis.speed = options.speed ?? 1.0;\n\t}\n\n\t/**\n\t * Render the spinner for a given time.\n\t */\n\trender(time: number): string {\n\t\tif (this.startTime === null) {\n\t\t\tthis.startTime = time;\n\t\t}\n\n\t\tconst frameNo =\n\t\t\t((time - this.startTime) * this.speed) / (this.interval / 1000.0) +\n\t\t\tthis.frameNoOffset;\n\t\tconst frame = this.frames[Math.floor(frameNo) % this.frames.length];\n\n\t\tconst styledFrame = Style.parse(this.style).apply(frame);\n\n\t\tif (this.text) {\n\t\t\treturn `${styledFrame} ${this.text}`;\n\t\t}\n\t\treturn styledFrame;\n\t}\n\n\t/**\n\t * Get the current frame without time advancement (for static rendering).\n\t */\n\tgetCurrentFrame(): string {\n\t\tconst now = Date.now() / 1000;\n\t\treturn this.render(now);\n\t}\n\n\t/**\n\t * Update spinner properties.\n\t */\n\tupdate(options: Partial<SpinnerOptions>): void {\n\t\tif (options.text !== undefined) this.text = options.text;\n\t\tif (options.style !== undefined) this.style = options.style;\n\t\tif (options.speed !== undefined) {\n\t\t\tthis.frameNoOffset =\n\t\t\t\tthis.startTime !== null\n\t\t\t\t\t? ((Date.now() / 1000 - this.startTime) * this.speed) /\n\t\t\t\t\t\t\t(this.interval / 1000.0) +\n\t\t\t\t\t\tthis.frameNoOffset\n\t\t\t\t\t: 0;\n\t\t\tthis.startTime = Date.now() / 1000;\n\t\t\tthis.speed = options.speed;\n\t\t}\n\t}\n\n\t__rich_console__(\n\t\t_console: Console,\n\t\t_consoleOptions: ConsoleOptions,\n\t): RenderResult {\n\t\tconst frame = this.getCurrentFrame();\n\t\treturn {\n\t\t\tsegments: [new Segment(`${frame}\\n`, Style.null())],\n\t\t\twidth: frame.length,\n\t\t};\n\t}\n}\n\n/**\n * List all available spinner names.\n */\nexport function listSpinners(): string[] {\n\treturn Object.keys(SPINNERS);\n}\n","import { Spinner } from \"./spinner\";\n\nexport interface StatusOptions {\n\tspinnerName?: string;\n}\n\nexport class Status {\n\tprivate spinner: Spinner;\n\tprivate message: string;\n\tprivate interval: ReturnType<typeof setInterval> | null = null;\n\tprivate started = false;\n\tprivate lastRenderedLines = 0;\n\n\tconstructor(message: string, options: StatusOptions = {}) {\n\t\tthis.message = message;\n\t\tthis.spinner = new Spinner(options.spinnerName ?? \"dots\");\n\t}\n\n\tstart(): void {\n\t\tif (this.started) return;\n\t\tthis.started = true;\n\n\t\t// Hide cursor\n\t\tprocess.stdout.write(\"\\x1b[?25l\");\n\n\t\t// Start animation\n\t\tthis.interval = setInterval(() => {\n\t\t\tthis.refresh();\n\t\t}, this.spinner.interval);\n\n\t\tthis.refresh();\n\t}\n\n\tstop(): void {\n\t\tif (!this.started) return;\n\n\t\tif (this.interval) {\n\t\t\tclearInterval(this.interval);\n\t\t\tthis.interval = null;\n\t\t}\n\n\t\t// Clear the status line\n\t\tif (this.lastRenderedLines > 0) {\n\t\t\tprocess.stdout.write(`\\x1b[${this.lastRenderedLines}A`);\n\t\t\tfor (let i = 0; i < this.lastRenderedLines; i++) {\n\t\t\t\tprocess.stdout.write(\"\\x1b[2K\\n\");\n\t\t\t}\n\t\t\tprocess.stdout.write(`\\x1b[${this.lastRenderedLines}A`);\n\t\t}\n\n\t\t// Show cursor\n\t\tprocess.stdout.write(\"\\x1b[?25h\");\n\t\tthis.started = false;\n\t}\n\n\tupdate(message: string): void {\n\t\tthis.message = message;\n\t\tif (this.started) {\n\t\t\tthis.refresh();\n\t\t}\n\t}\n\n\tprivate refresh(): void {\n\t\t// Clear previous output\n\t\tif (this.lastRenderedLines > 0) {\n\t\t\tprocess.stdout.write(`\\x1b[${this.lastRenderedLines}A`);\n\t\t\tfor (let i = 0; i < this.lastRenderedLines; i++) {\n\t\t\t\tprocess.stdout.write(\"\\x1b[2K\\n\");\n\t\t\t}\n\t\t\tprocess.stdout.write(`\\x1b[${this.lastRenderedLines}A`);\n\t\t}\n\n\t\tconst frame = this.spinner.getCurrentFrame();\n\t\tconst output = `${frame} ${this.message}\\n`;\n\t\tthis.lastRenderedLines = 1;\n\t\tprocess.stdout.write(output);\n\t}\n}\n","/** biome-ignore-all lint/suspicious/noExplicitAny: false */\n/** biome-ignore-all assist/source/organizeImports: false */\nimport process from \"node:process\";\nimport wrapAnsi from \"wrap-ansi\";\nimport { Terminal } from \"../terminal/terminal\";\nimport { MarkupParser } from \"../core/markup\";\nimport type { ConsoleOptions } from \"../types/console-options\";\nimport { isRenderable, type Renderable } from \"../types/renderable\";\nimport { Segment } from \"../core/segment\";\nimport { Traceback } from \"../traceback/traceback\";\nimport { type Theme, DEFAULT_THEME } from \"../themes/theme\";\nimport { getRenderResult } from \"../utils/render-utils\";\nimport { Status } from \"../status/status\";\nimport type { SpinnerName } from \"cli-spinners\";\n\nexport class Console {\n\terror(message: any): void {\n\t\tconst text = String(message);\n\t\tprocess.stderr.write(`\\x1b[31m${text}\\x1b[0m\\n`);\n\t}\n\tprivate readonly terminal: Terminal;\n\tprivate readonly markupParser: MarkupParser;\n\tprivate readonly options: ConsoleOptions;\n\tpublic theme: Theme;\n\n\tconstructor(options: ConsoleOptions = {}) {\n\t\tthis.options = options;\n\t\tthis.terminal = new Terminal();\n\t\tthis.theme = options.theme ?? DEFAULT_THEME;\n\t\tthis.markupParser = new MarkupParser(this.theme);\n\t}\n\n\tget width(): number {\n\t\treturn this.options.width ?? this.terminal.width;\n\t}\n\n\tget height(): number {\n\t\treturn this.options.height ?? this.terminal.height;\n\t}\n\n\t/**\n\t * Prints objects to the console.\n\t */\n\tprint(...objects: any[]): void {\n\t\tconst lastObj = objects[objects.length - 1];\n\t\tlet printObjects = objects;\n\t\tlet options: { style?: any; markup?: boolean } = {};\n\n\t\t// Check for options object at the end\n\t\tif (\n\t\t\tobjects.length > 1 &&\n\t\t\ttypeof lastObj === \"object\" &&\n\t\t\tlastObj !== null &&\n\t\t\t!isRenderable(lastObj) &&\n\t\t\t(\"style\" in lastObj || \"markup\" in lastObj)\n\t\t) {\n\t\t\toptions = objects.pop();\n\t\t\tprintObjects = objects;\n\t\t}\n\n\t\tconst output = printObjects\n\t\t\t.map((obj) => {\n\t\t\t\tif (typeof obj === \"string\") {\n\t\t\t\t\treturn this.renderString(obj, options.markup ?? true);\n\t\t\t\t}\n\t\t\t\tif (isRenderable(obj)) {\n\t\t\t\t\treturn this.render(obj);\n\t\t\t\t}\n\t\t\t\treturn String(obj);\n\t\t\t})\n\t\t\t.join(\" \");\n\n\t\tthis.write(`${output}\\n`);\n\t}\n\n\t/**\n\t * Prints a formatted exception.\n\t */\n\tprintException(error: Error): void {\n\t\tconst traceback = new Traceback(error);\n\t\tthis.print(traceback);\n\t}\n\n\t/**\n\t * Displays a status spinner.\n\t */\n\tstatus(\n\t\tmessage: string,\n\t\toptions: { spinner?: SpinnerName } = {},\n\t): {\n\t\tstart: () => void;\n\t\tstop: () => void;\n\t\tupdate: (msg: string) => void;\n\t} & Promise<void> {\n\t\t// Allow usage as a context manager if a callback is provided?\n\t\t// JavaScript doesn't have 'with'.\n\t\t// We can return an object with start/stop.\n\t\t// But to match python \"with console.status(...) as status:\", we might want a callback helper?\n\t\t// For now, let's return the Status object controls.\n\t\t// But wait, the Python example is:\n\t\t// with console.status(\"Working...\"):\n\t\t//    time.sleep(2)\n\t\t//\n\t\t// In JS:\n\t\t// await console.status(\"Working...\", async () => { await sleep(2000) });\n\n\t\t// Let's implement the callback overload.\n\t\treturn new Status(message, {\n\t\t\tspinnerName: options.spinner,\n\t\t\t...options,\n\t\t}) as any;\n\t}\n\n\t/**\n\t * Run a task with a status spinner.\n\t */\n\tasync withStatus<T>(\n\t\tmessage: string,\n\t\ttask: (status: Status) => Promise<T>,\n\t\toptions: { spinner?: SpinnerName } = {},\n\t): Promise<T> {\n\t\tconst status = new Status(message, { spinnerName: options.spinner });\n\t\tstatus.start();\n\t\ttry {\n\t\t\treturn await task(status);\n\t\t} finally {\n\t\t\tstatus.stop();\n\t\t}\n\t}\n\n\t/**\n\t * Renders a renderable object to a string.\n\t */\n\trender(renderable: Renderable): string {\n\t\tconst result = getRenderResult(renderable, this, this.options);\n\t\treturn result.segments.map((s: Segment) => s.render()).join(\"\");\n\t}\n\n\t/**\n\t * Internal string rendering with markup and wrapping.\n\t */\n\tprivate renderString(text: string, markup: boolean = true): string {\n\t\tconst segments = markup\n\t\t\t? this.markupParser.parse(text)\n\t\t\t: [new Segment(text)];\n\t\tconst rendered = segments.map((s) => s.render()).join(\"\");\n\n\t\t// Apply word wrapping\n\t\t// wrapAnsi handles ANSI codes correctly\n\t\treturn wrapAnsi(rendered, this.width, { hard: true });\n\t}\n\n\t/**\n\t * Low-level write to stdout.\n\t */\n\tprivate write(text: string): void {\n\t\tprocess.stdout.write(text);\n\t}\n}\n","import wrapAnsi from \"wrap-ansi\";\nimport type { Console } from \"../console/console\";\nimport { MarkupParser } from \"../core/markup\";\nimport { Segment } from \"../core/segment\";\nimport { Style } from \"../core/style\";\nimport type { ConsoleOptions } from \"../types/console-options\";\nimport type { Renderable, RenderResult } from \"../types/renderable\";\n\nexport type JustifyMethod = \"left\" | \"center\" | \"right\" | \"full\";\nexport type OverflowMethod = \"fold\" | \"crop\" | \"ellipsis\";\n\nexport class Text implements Renderable {\n\tprivate readonly segments: Segment[];\n\n\tconstructor(\n\t\tcontent: string | Segment[],\n\t\tpublic readonly style: Style = Style.null(),\n\t\tpublic readonly justify: JustifyMethod = \"left\",\n\t\tpublic readonly overflow: OverflowMethod = \"fold\",\n\t\tpublic readonly noWrap: boolean = false,\n\t) {\n\t\tif (typeof content === \"string\") {\n\t\t\tconst parser = new MarkupParser();\n\t\t\tthis.segments = parser.parse(content);\n\t\t} else {\n\t\t\tthis.segments = content;\n\t\t}\n\t}\n\n\t__rich_console__(console: Console, options: ConsoleOptions): RenderResult {\n\t\tconst width = options.width ?? console.width;\n\t\tconst text = this.segments.map((s) => s.render()).join(\"\");\n\n\t\tlet wrapped = text;\n\t\tif (!this.noWrap) {\n\t\t\twrapped = wrapAnsi(text, width, { hard: true, trim: false });\n\t\t}\n\n\t\t// TODO: Implement justification and overflow\n\n\t\tconst resultSegments = wrapped.split(\"\\n\").flatMap((line) => {\n\t\t\t// This is a bit simplified as we lose original segments styles if we just wrap the rendered string\n\t\t\t// In a full implementation we'd wrap the Segment objects themselves.\n\t\t\treturn [new Segment(line), new Segment(\"\\n\", Style.null(), true)];\n\t\t});\n\n\t\treturn {\n\t\t\tsegments: resultSegments,\n\t\t\twidth: width,\n\t\t};\n\t}\n}\n","import boxes from \"cli-boxes\";\n\nexport interface BoxData {\n\ttopLeft: string;\n\ttop: string;\n\ttopRight: string;\n\tright: string;\n\tbottomRight: string;\n\tbottom: string;\n\tbottomLeft: string;\n\tleft: string;\n\t// Middle connectors for tables\n\ttopMid?: string;\n\tmidMid?: string;\n\tbottomMid?: string;\n\tleftMid?: string;\n\trightMid?: string;\n\tmid?: string;\n\tverticalMid?: string;\n\t[key: string]: string | undefined;\n}\n\n// Custom box definitions for styles not in cli-boxes or with enhanced connectors\nconst CUSTOM_BOXES: Record<string, BoxData> = {\n\t// Rounded corners (may not be in all versions of cli-boxes)\n\trounded: {\n\t\ttopLeft: \"\",\n\t\ttop: \"\",\n\t\ttopRight: \"\",\n\t\tright: \"\",\n\t\tbottomRight: \"\",\n\t\tbottom: \"\",\n\t\tbottomLeft: \"\",\n\t\tleft: \"\",\n\t\ttopMid: \"\",\n\t\tmidMid: \"\",\n\t\tbottomMid: \"\",\n\t\tleftMid: \"\",\n\t\trightMid: \"\",\n\t\tmid: \"\",\n\t\tverticalMid: \"\",\n\t},\n\tround: {\n\t\ttopLeft: \"\",\n\t\ttop: \"\",\n\t\ttopRight: \"\",\n\t\tright: \"\",\n\t\tbottomRight: \"\",\n\t\tbottom: \"\",\n\t\tbottomLeft: \"\",\n\t\tleft: \"\",\n\t\ttopMid: \"\",\n\t\tmidMid: \"\",\n\t\tbottomMid: \"\",\n\t\tleftMid: \"\",\n\t\trightMid: \"\",\n\t\tmid: \"\",\n\t\tverticalMid: \"\",\n\t},\n\t// Heavy/bold lines\n\theavy: {\n\t\ttopLeft: \"\",\n\t\ttop: \"\",\n\t\ttopRight: \"\",\n\t\tright: \"\",\n\t\tbottomRight: \"\",\n\t\tbottom: \"\",\n\t\tbottomLeft: \"\",\n\t\tleft: \"\",\n\t\ttopMid: \"\",\n\t\tmidMid: \"\",\n\t\tbottomMid: \"\",\n\t\tleftMid: \"\",\n\t\trightMid: \"\",\n\t\tmid: \"\",\n\t\tverticalMid: \"\",\n\t},\n\t// Double lines\n\tdouble: {\n\t\ttopLeft: \"\",\n\t\ttop: \"\",\n\t\ttopRight: \"\",\n\t\tright: \"\",\n\t\tbottomRight: \"\",\n\t\tbottom: \"\",\n\t\tbottomLeft: \"\",\n\t\tleft: \"\",\n\t\ttopMid: \"\",\n\t\tmidMid: \"\",\n\t\tbottomMid: \"\",\n\t\tleftMid: \"\",\n\t\trightMid: \"\",\n\t\tmid: \"\",\n\t\tverticalMid: \"\",\n\t},\n\t// Single/square lines\n\tsingle: {\n\t\ttopLeft: \"\",\n\t\ttop: \"\",\n\t\ttopRight: \"\",\n\t\tright: \"\",\n\t\tbottomRight: \"\",\n\t\tbottom: \"\",\n\t\tbottomLeft: \"\",\n\t\tleft: \"\",\n\t\ttopMid: \"\",\n\t\tmidMid: \"\",\n\t\tbottomMid: \"\",\n\t\tleftMid: \"\",\n\t\trightMid: \"\",\n\t\tmid: \"\",\n\t\tverticalMid: \"\",\n\t},\n\tsquare: {\n\t\ttopLeft: \"\",\n\t\ttop: \"\",\n\t\ttopRight: \"\",\n\t\tright: \"\",\n\t\tbottomRight: \"\",\n\t\tbottom: \"\",\n\t\tbottomLeft: \"\",\n\t\tleft: \"\",\n\t\ttopMid: \"\",\n\t\tmidMid: \"\",\n\t\tbottomMid: \"\",\n\t\tleftMid: \"\",\n\t\trightMid: \"\",\n\t\tmid: \"\",\n\t\tverticalMid: \"\",\n\t},\n\t// ASCII-safe\n\tascii: {\n\t\ttopLeft: \"+\",\n\t\ttop: \"-\",\n\t\ttopRight: \"+\",\n\t\tright: \"|\",\n\t\tbottomRight: \"+\",\n\t\tbottom: \"-\",\n\t\tbottomLeft: \"+\",\n\t\tleft: \"|\",\n\t\ttopMid: \"+\",\n\t\tmidMid: \"+\",\n\t\tbottomMid: \"+\",\n\t\tleftMid: \"+\",\n\t\trightMid: \"+\",\n\t\tmid: \"-\",\n\t\tverticalMid: \"|\",\n\t},\n\t// Minimal - no borders\n\tminimal: {\n\t\ttopLeft: \" \",\n\t\ttop: \" \",\n\t\ttopRight: \" \",\n\t\tright: \" \",\n\t\tbottomRight: \" \",\n\t\tbottom: \" \",\n\t\tbottomLeft: \" \",\n\t\tleft: \" \",\n\t\ttopMid: \" \",\n\t\tmidMid: \" \",\n\t\tbottomMid: \" \",\n\t\tleftMid: \" \",\n\t\trightMid: \" \",\n\t\tmid: \"\",\n\t\tverticalMid: \" \",\n\t},\n\t// Simple - just horizontal lines\n\tsimple: {\n\t\ttopLeft: \" \",\n\t\ttop: \"\",\n\t\ttopRight: \" \",\n\t\tright: \" \",\n\t\tbottomRight: \" \",\n\t\tbottom: \"\",\n\t\tbottomLeft: \" \",\n\t\tleft: \" \",\n\t\ttopMid: \" \",\n\t\tmidMid: \"\",\n\t\tbottomMid: \" \",\n\t\tleftMid: \" \",\n\t\trightMid: \" \",\n\t\tmid: \"\",\n\t\tverticalMid: \" \",\n\t},\n\t// Markdown style\n\tmarkdown: {\n\t\ttopLeft: \" \",\n\t\ttop: \" \",\n\t\ttopRight: \" \",\n\t\tright: \"|\",\n\t\tbottomRight: \" \",\n\t\tbottom: \" \",\n\t\tbottomLeft: \" \",\n\t\tleft: \"|\",\n\t\ttopMid: \" \",\n\t\tmidMid: \"|\",\n\t\tbottomMid: \" \",\n\t\tleftMid: \"|\",\n\t\trightMid: \"|\",\n\t\tmid: \"-\",\n\t\tverticalMid: \"|\",\n\t},\n};\n\nexport type BoxStyle =\n\t| \"none\"\n\t| \"rounded\"\n\t| \"round\"\n\t| \"heavy\"\n\t| \"bold\"\n\t| \"double\"\n\t| \"single\"\n\t| \"square\"\n\t| \"ascii\"\n\t| \"minimal\"\n\t| \"simple\"\n\t| \"markdown\"\n\t| keyof typeof boxes;\n\n/**\n * Get box drawing characters for a given style.\n */\nexport function getBox(style: BoxStyle): BoxData | null {\n\tif (style === \"none\") return null;\n\n\t// Check custom boxes first (they have better middle connector support)\n\tif (style in CUSTOM_BOXES) {\n\t\treturn CUSTOM_BOXES[style];\n\t}\n\n\t// Alias handling\n\tif (style === \"bold\") {\n\t\treturn CUSTOM_BOXES.heavy;\n\t}\n\n\t// Fall back to cli-boxes\n\tconst cliBox = (boxes as Record<string, BoxData>)[style];\n\tif (cliBox) {\n\t\t// Enhance cli-boxes data with middle connectors\n\t\treturn {\n\t\t\t...cliBox,\n\t\t\ttopMid: cliBox.topMid ?? \"\",\n\t\t\tmidMid: cliBox.midMid ?? \"\",\n\t\t\tbottomMid: cliBox.bottomMid ?? \"\",\n\t\t\tleftMid: cliBox.leftMid ?? \"\",\n\t\t\trightMid: cliBox.rightMid ?? \"\",\n\t\t\tmid: cliBox.mid ?? \"\",\n\t\t\tverticalMid: cliBox.verticalMid ?? \"\",\n\t\t};\n\t}\n\n\t// Default to rounded\n\treturn CUSTOM_BOXES.rounded;\n}\n\n/**\n * List all available box styles.\n */\nexport function listBoxStyles(): string[] {\n\tconst customStyles = Object.keys(CUSTOM_BOXES);\n\tconst cliBoxStyles = Object.keys(boxes);\n\treturn [...new Set([...customStyles, ...cliBoxStyles])];\n}\n","import { Segment } from \"./segment\";\nimport { Style } from \"./style\";\n\n/**\n * Split a list of segments into lines based on newlines.\n */\nexport function splitLines(segments: Segment[]): Segment[][] {\n\tconst lines: Segment[][] = [];\n\tlet currentLine: Segment[] = [];\n\n\tfor (const segment of segments) {\n\t\tif (segment.text.includes(\"\\n\")) {\n\t\t\tconst parts = segment.text.split(\"\\n\");\n\t\t\tfor (let i = 0; i < parts.length; i++) {\n\t\t\t\tconst part = parts[i];\n\t\t\t\tif (part) {\n\t\t\t\t\tcurrentLine.push(new Segment(part, segment.style, segment.isControl));\n\t\t\t\t}\n\n\t\t\t\tif (i < parts.length - 1) {\n\t\t\t\t\tlines.push(currentLine);\n\t\t\t\t\tcurrentLine = [];\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tcurrentLine.push(segment);\n\t\t}\n\t}\n\n\tif (currentLine.length > 0) {\n\t\tlines.push(currentLine);\n\t}\n\n\treturn lines;\n}\n\n/**\n * Pad a line of segments to a specific width.\n */\nexport function padLine(\n\tline: Segment[],\n\twidth: number,\n\tstyle: Style = Style.null(),\n): Segment[] {\n\tconst currentWidth = line.reduce((acc, s) => acc + s.cellLength(), 0);\n\tif (currentWidth >= width) return line;\n\n\tconst padding = width - currentWidth;\n\treturn [...line, new Segment(\" \".repeat(padding), style)];\n}\n","/** biome-ignore-all assist/source/organizeImports: biome-ignore assist/source/organizeImports */\n/** biome-ignore-all lint/suspicious/noExplicitAny: biome-ignore lint/suspicious/noExplicitAny */\nimport type { Console } from \"../console/console\";\nimport type { ConsoleOptions } from \"../types/console-options\";\nimport type { Renderable, RenderResult } from \"../types/renderable\";\nimport { isRenderable } from \"../types/renderable\";\nimport { Segment } from \"../core/segment\";\nimport { Style } from \"../core/style\";\nimport { getBox, type BoxStyle } from \"../utils/box\";\nimport { splitLines, padLine } from \"../core/lines\";\nimport stringWidth from \"string-width\";\n\nexport interface PanelOptions {\n\ttitle?: string;\n\ttitleAlign?: \"left\" | \"center\" | \"right\";\n\tsubtitle?: string;\n\tsubtitleAlign?: \"left\" | \"center\" | \"right\";\n\tbox?: BoxStyle;\n\tstyle?: Style | string;\n\tborderStyle?: Style | string;\n\tpadding?: number | [number, number] | [number, number, number, number];\n\twidth?: number;\n\theight?: number;\n\texpand?: boolean;\n\thighlight?: boolean;\n}\n\n/**\n * A bordered panel container for any renderable content.\n * Supports titles, subtitles, various box styles, and padding.\n */\nexport class Panel implements Renderable {\n\tconstructor(\n\t\tpublic readonly renderable: Renderable | string,\n\t\tpublic readonly options: PanelOptions = {},\n\t) {}\n\n\t/**\n\t * Create a panel that fits its content (expand=false).\n\t */\n\tstatic fit(\n\t\trenderable: Renderable | string,\n\t\toptions: PanelOptions = {},\n\t): Panel {\n\t\treturn new Panel(renderable, { ...options, expand: false });\n\t}\n\n\t__rich_console__(\n\t\tconsole: Console,\n\t\tconsoleOptions: ConsoleOptions,\n\t): RenderResult {\n\t\tconst box = getBox(this.options.box ?? \"rounded\");\n\t\tconst expand = this.options.expand ?? true;\n\t\tconst maxWidth =\n\t\t\tthis.options.width ?? consoleOptions.width ?? console.width;\n\n\t\tconst borderStyle =\n\t\t\ttypeof this.options.borderStyle === \"string\"\n\t\t\t\t? Style.parse(this.options.borderStyle)\n\t\t\t\t: (this.options.borderStyle ?? Style.parse(\"dim\"));\n\n\t\tconst titleAlign = this.options.titleAlign ?? \"center\";\n\t\tconst subtitleAlign = this.options.subtitleAlign ?? \"center\";\n\n\t\t// Parse padding\n\t\tconst padding = this.normalizePadding(this.options.padding ?? 1);\n\t\tconst segments: Segment[] = [];\n\n\t\tif (!box) {\n\t\t\treturn { segments: [], width: 0 };\n\t\t}\n\n\t\t// Render content first to determine width\n\t\tlet contentSegments: Segment[] = [];\n\t\tif (typeof this.renderable === \"string\") {\n\t\t\t// Simple string content\n\t\t\tcontentSegments = [new Segment(this.renderable)];\n\t\t} else if (isRenderable(this.renderable)) {\n\t\t\tconst contentWidth = maxWidth - 2 - padding[1] - padding[3];\n\t\t\tconst result = this.renderable.__rich_console__(console, {\n\t\t\t\t...consoleOptions,\n\t\t\t\twidth: contentWidth,\n\t\t\t});\n\t\t\tif (\"segments\" in result) {\n\t\t\t\tcontentSegments = Array.from(result.segments);\n\t\t\t}\n\t\t}\n\n\t\t// Split content into lines\n\t\tconst lines = splitLines(contentSegments);\n\n\t\t// Calculate actual width needed\n\t\tlet maxContentWidth = 0;\n\t\tfor (const line of lines) {\n\t\t\tconst lineWidth = line.reduce((w, seg) => w + stringWidth(seg.text), 0);\n\t\t\tif (lineWidth > maxContentWidth) maxContentWidth = lineWidth;\n\t\t}\n\n\t\t// Consider title/subtitle width\n\t\tconst titleWidth = this.options.title\n\t\t\t? stringWidth(this.options.title) + 4\n\t\t\t: 0;\n\t\tconst subtitleWidth = this.options.subtitle\n\t\t\t? stringWidth(this.options.subtitle) + 4\n\t\t\t: 0;\n\n\t\tlet panelWidth: number;\n\t\tif (expand) {\n\t\t\tpanelWidth = maxWidth;\n\t\t} else {\n\t\t\tpanelWidth = Math.min(\n\t\t\t\tmaxWidth,\n\t\t\t\tMath.max(\n\t\t\t\t\tmaxContentWidth + 2 + padding[1] + padding[3],\n\t\t\t\t\ttitleWidth + 2,\n\t\t\t\t\tsubtitleWidth + 2,\n\t\t\t\t),\n\t\t\t);\n\t\t}\n\n\t\tconst innerWidth = panelWidth - 2;\n\n\t\t// Top border with optional title\n\t\tsegments.push(\n\t\t\t...this.renderTopBorder(box, innerWidth, borderStyle, titleAlign),\n\t\t);\n\t\tsegments.push(new Segment(\"\\n\", Style.null(), true));\n\n\t\t// Top padding\n\t\tfor (let i = 0; i < padding[0]; i++) {\n\t\t\tsegments.push(new Segment(box.left, borderStyle));\n\t\t\tsegments.push(new Segment(\" \".repeat(innerWidth)));\n\t\t\tsegments.push(new Segment(box.right, borderStyle));\n\t\t\tsegments.push(new Segment(\"\\n\", Style.null(), true));\n\t\t}\n\n\t\t// Content rows with borders\n\t\tfor (const line of lines) {\n\t\t\tsegments.push(new Segment(box.left, borderStyle));\n\n\t\t\t// Left padding\n\t\t\tsegments.push(new Segment(\" \".repeat(padding[3])));\n\n\t\t\t// Content with right padding to fill width\n\t\t\tconst contentPaddedWidth = innerWidth - padding[1] - padding[3];\n\t\t\tconst paddedLine = padLine(line, contentPaddedWidth);\n\t\t\tsegments.push(...paddedLine);\n\n\t\t\t// Right padding\n\t\t\tsegments.push(new Segment(\" \".repeat(padding[1])));\n\n\t\t\tsegments.push(new Segment(box.right, borderStyle));\n\t\t\tsegments.push(new Segment(\"\\n\", Style.null(), true));\n\t\t}\n\n\t\t// Handle empty content\n\t\tif (lines.length === 0) {\n\t\t\tsegments.push(new Segment(box.left, borderStyle));\n\t\t\tsegments.push(new Segment(\" \".repeat(innerWidth)));\n\t\t\tsegments.push(new Segment(box.right, borderStyle));\n\t\t\tsegments.push(new Segment(\"\\n\", Style.null(), true));\n\t\t}\n\n\t\t// Bottom padding\n\t\tfor (let i = 0; i < padding[2]; i++) {\n\t\t\tsegments.push(new Segment(box.left, borderStyle));\n\t\t\tsegments.push(new Segment(\" \".repeat(innerWidth)));\n\t\t\tsegments.push(new Segment(box.right, borderStyle));\n\t\t\tsegments.push(new Segment(\"\\n\", Style.null(), true));\n\t\t}\n\n\t\t// Bottom border with optional subtitle\n\t\tsegments.push(\n\t\t\t...this.renderBottomBorder(box, innerWidth, borderStyle, subtitleAlign),\n\t\t);\n\t\tsegments.push(new Segment(\"\\n\", Style.null(), true));\n\n\t\treturn {\n\t\t\tsegments,\n\t\t\twidth: panelWidth,\n\t\t};\n\t}\n\n\t/**\n\t * Normalize padding to [top, right, bottom, left] format.\n\t */\n\tprivate normalizePadding(\n\t\tpadding: number | [number, number] | [number, number, number, number],\n\t): [number, number, number, number] {\n\t\tif (typeof padding === \"number\") {\n\t\t\treturn [padding, padding, padding, padding];\n\t\t}\n\t\tif (padding.length === 2) {\n\t\t\treturn [padding[0], padding[1], padding[0], padding[1]];\n\t\t}\n\t\treturn padding;\n\t}\n\n\t/**\n\t * Render top border with optional title.\n\t */\n\tprivate renderTopBorder(\n\t\tbox: any,\n\t\tinnerWidth: number,\n\t\tborderStyle: Style,\n\t\talign: \"left\" | \"center\" | \"right\",\n\t): Segment[] {\n\t\tconst segments: Segment[] = [];\n\n\t\tif (this.options.title) {\n\t\t\tconst title = ` ${this.options.title} `;\n\t\t\tconst titleWidth = stringWidth(title);\n\t\t\tconst remainingWidth = Math.max(0, innerWidth - titleWidth);\n\n\t\t\tlet leftLine: string;\n\t\t\tlet rightLine: string;\n\n\t\t\tswitch (align) {\n\t\t\t\tcase \"left\":\n\t\t\t\t\tleftLine = \"\";\n\t\t\t\t\trightLine = box.top.repeat(remainingWidth);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"right\":\n\t\t\t\t\tleftLine = box.top.repeat(remainingWidth);\n\t\t\t\t\trightLine = \"\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"center\":\n\t\t\t\tdefault: {\n\t\t\t\t\tconst leftWidth = Math.floor(remainingWidth / 2);\n\t\t\t\t\tleftLine = box.top.repeat(leftWidth);\n\t\t\t\t\trightLine = box.top.repeat(remainingWidth - leftWidth);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tsegments.push(new Segment(box.topLeft, borderStyle));\n\t\t\tsegments.push(new Segment(leftLine, borderStyle));\n\t\t\tsegments.push(new Segment(title, Style.parse(\"bold\")));\n\t\t\tsegments.push(new Segment(rightLine, borderStyle));\n\t\t\tsegments.push(new Segment(box.topRight, borderStyle));\n\t\t} else {\n\t\t\tsegments.push(\n\t\t\t\tnew Segment(\n\t\t\t\t\tbox.topLeft + box.top.repeat(innerWidth) + box.topRight,\n\t\t\t\t\tborderStyle,\n\t\t\t\t),\n\t\t\t);\n\t\t}\n\n\t\treturn segments;\n\t}\n\n\t/**\n\t * Render bottom border with optional subtitle.\n\t */\n\tprivate renderBottomBorder(\n\t\tbox: any,\n\t\tinnerWidth: number,\n\t\tborderStyle: Style,\n\t\talign: \"left\" | \"center\" | \"right\",\n\t): Segment[] {\n\t\tconst segments: Segment[] = [];\n\n\t\tif (this.options.subtitle) {\n\t\t\tconst subtitle = ` ${this.options.subtitle} `;\n\t\t\tconst subtitleWidth = stringWidth(subtitle);\n\t\t\tconst remainingWidth = Math.max(0, innerWidth - subtitleWidth);\n\n\t\t\tlet leftLine: string;\n\t\t\tlet rightLine: string;\n\n\t\t\tswitch (align) {\n\t\t\t\tcase \"left\":\n\t\t\t\t\tleftLine = \"\";\n\t\t\t\t\trightLine = box.bottom.repeat(remainingWidth);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"right\":\n\t\t\t\t\tleftLine = box.bottom.repeat(remainingWidth);\n\t\t\t\t\trightLine = \"\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"center\":\n\t\t\t\tdefault: {\n\t\t\t\t\tconst leftWidth = Math.floor(remainingWidth / 2);\n\t\t\t\t\tleftLine = box.bottom.repeat(leftWidth);\n\t\t\t\t\trightLine = box.bottom.repeat(remainingWidth - leftWidth);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tsegments.push(new Segment(box.bottomLeft, borderStyle));\n\t\t\tsegments.push(new Segment(leftLine, borderStyle));\n\t\t\tsegments.push(new Segment(subtitle, Style.parse(\"dim italic\")));\n\t\t\tsegments.push(new Segment(rightLine, borderStyle));\n\t\t\tsegments.push(new Segment(box.bottomRight, borderStyle));\n\t\t} else {\n\t\t\tsegments.push(\n\t\t\t\tnew Segment(\n\t\t\t\t\tbox.bottomLeft + box.bottom.repeat(innerWidth) + box.bottomRight,\n\t\t\t\t\tborderStyle,\n\t\t\t\t),\n\t\t\t);\n\t\t}\n\n\t\treturn segments;\n\t}\n}\n","import type { Console } from \"../console/console\";\nimport { splitLines } from \"../core/lines\";\nimport { Segment } from \"../core/segment\";\nimport type { ConsoleOptions } from \"../types/console-options\";\nimport {\n\tisRenderable,\n\ttype Renderable,\n\ttype RenderResult,\n} from \"../types/renderable\";\n\nexport type PaddingValue =\n\t| number\n\t| [number, number]\n\t| [number, number, number, number];\n\nexport class Padding implements Renderable {\n\ttop: number;\n\tright: number;\n\tbottom: number;\n\tleft: number;\n\n\tconstructor(\n\t\tpublic renderable: Renderable | string,\n\t\tpadding: PaddingValue,\n\t) {\n\t\tif (typeof padding === \"number\") {\n\t\t\tthis.top = this.right = this.bottom = this.left = padding;\n\t\t} else if (Array.isArray(padding)) {\n\t\t\tif (padding.length === 2) {\n\t\t\t\tthis.top = this.bottom = padding[0];\n\t\t\t\tthis.right = this.left = padding[1];\n\t\t\t} else {\n\t\t\t\t[this.top, this.right, this.bottom, this.left] = padding;\n\t\t\t}\n\t\t} else {\n\t\t\tthis.top = this.right = this.bottom = this.left = 0;\n\t\t}\n\t}\n\n\t__rich_console__(console: Console, options: ConsoleOptions): RenderResult {\n\t\tconst width = options.width ?? console.width;\n\t\tconst innerWidth = Math.max(0, width - this.left - this.right);\n\n\t\t// Render content\n\t\tlet contentSegments: Segment[] = [];\n\t\tif (typeof this.renderable === \"string\") {\n\t\t\t// Simple string handling\n\t\t\t// We really should expose a simpler renderString or use Text()\n\t\t\tcontentSegments = [new Segment(this.renderable)];\n\t\t} else if (isRenderable(this.renderable)) {\n\t\t\tconst result = this.renderable.__rich_console__(console, {\n\t\t\t\t...options,\n\t\t\t\twidth: innerWidth,\n\t\t\t});\n\t\t\tif (\"segments\" in result) contentSegments = result.segments;\n\t\t}\n\n\t\tconst lines = splitLines(contentSegments);\n\t\tconst segments: Segment[] = [];\n\n\t\t// Top padding\n\t\tfor (let i = 0; i < this.top; i++) {\n\t\t\tsegments.push(new Segment(\" \".repeat(width) + \"\\n\"));\n\t\t}\n\n\t\t// Content with Left/Right padding\n\t\tconst leftPad = \" \".repeat(this.left);\n\t\t// Right padding is implicit if we don't force width, but let's pad\n\n\t\tfor (const line of lines) {\n\t\t\tsegments.push(new Segment(leftPad));\n\t\t\tsegments.push(...line);\n\t\t\t// We assume line renders to innerWidth or less.\n\t\t\t// If we want hard right padding we need to know line length.\n\t\t\t// For simple flow, just left pad is enough unless background colors are involved.\n\t\t\tsegments.push(new Segment(\"\\n\"));\n\t\t}\n\n\t\t// Bottom padding\n\t\tfor (let i = 0; i < this.bottom; i++) {\n\t\t\tsegments.push(new Segment(\" \".repeat(width) + \"\\n\"));\n\t\t}\n\n\t\treturn { segments, width };\n\t}\n}\n","import type { Console } from \"../console/console\";\nimport { splitLines } from \"../core/lines\";\nimport { Segment } from \"../core/segment\";\nimport type { ConsoleOptions } from \"../types/console-options\";\nimport {\n\tisRenderable,\n\ttype Renderable,\n\ttype RenderResult,\n} from \"../types/renderable\";\n\nexport type AlignMethod = \"left\" | \"center\" | \"right\";\n\nexport class Align implements Renderable {\n\tconstructor(\n\t\tpublic renderable: Renderable | string,\n\t\tpublic align: AlignMethod,\n\t\tpublic style?: any,\n\t) {}\n\n\tstatic left(renderable: Renderable | string): Align {\n\t\treturn new Align(renderable, \"left\");\n\t}\n\n\tstatic center(renderable: Renderable | string): Align {\n\t\treturn new Align(renderable, \"center\");\n\t}\n\n\tstatic right(renderable: Renderable | string): Align {\n\t\treturn new Align(renderable, \"right\");\n\t}\n\n\t__rich_console__(console: Console, options: ConsoleOptions): RenderResult {\n\t\tconst width = options.width ?? console.width;\n\n\t\t// Render content with unknown width (or full width?)\n\t\t// If we render with full width, many components expand to fill it (like Table).\n\t\t// If we want to align a Table, we assume it sized itself smaller than Width?\n\t\t// This is tricky.\n\t\t// Usually Align wraps something that has an intrinsic size or we constrain it?\n\t\t// Let's assume we render content with full width available, but we need to know its ACTUAL width used.\n\n\t\tlet contentSegments: Segment[] = [];\n\t\tif (typeof this.renderable === \"string\") {\n\t\t\tcontentSegments = [new Segment(this.renderable)];\n\t\t} else if (isRenderable(this.renderable)) {\n\t\t\t// We might want to pass a smaller width if we want to squeeze it?\n\t\t\t// But aligning usually means moving a block in available space.\n\t\t\tconst result = this.renderable.__rich_console__(console, options);\n\t\t\tif (\"segments\" in result) contentSegments = result.segments;\n\t\t}\n\n\t\tconst lines = splitLines(contentSegments);\n\t\tconst segments: Segment[] = [];\n\n\t\tfor (const line of lines) {\n\t\t\t// Calculate line width\n\t\t\tconst lineWidth = line.reduce((acc, s) => acc + s.cellLength(), 0);\n\t\t\tconst remaining = Math.max(0, width - lineWidth);\n\n\t\t\tif (remaining === 0) {\n\t\t\t\tsegments.push(...line);\n\t\t\t} else {\n\t\t\t\tlet leftSpace = 0;\n\t\t\t\tif (this.align === \"center\") leftSpace = Math.floor(remaining / 2);\n\t\t\t\telse if (this.align === \"right\") leftSpace = remaining;\n\n\t\t\t\tif (leftSpace > 0) segments.push(new Segment(\" \".repeat(leftSpace)));\n\t\t\t\tsegments.push(...line);\n\t\t\t\t// Right space is implicit\n\t\t\t}\n\t\t\tsegments.push(new Segment(\"\\n\"));\n\t\t}\n\n\t\treturn { segments, width };\n\t}\n}\n","/**\n * JSON renderable - pretty-printed and syntax-highlighted JSON\n */\n/** biome-ignore-all lint/suspicious/noShadowRestrictedNames: false */\n/** biome-ignore-all assist/source/organizeImports: false */\n\nimport type { Console } from \"../console/console\";\nimport type { ConsoleOptions } from \"../types/console-options\";\nimport type { Renderable, RenderResult } from \"../types/renderable\";\nimport { Segment } from \"../core/segment\";\nimport { Style } from \"../core/style\";\n\nexport interface JSONOptions {\n\tindent?: number | string;\n\thighlight?: boolean;\n\tsortKeys?: boolean;\n}\n\n/**\n * A renderable which pretty prints JSON with syntax highlighting.\n */\nexport class JSON implements Renderable {\n\tprivate readonly text: string;\n\tprivate readonly highlight: boolean;\n\n\tconstructor(json: string, options: JSONOptions = {}) {\n\t\tconst { indent = 2, sortKeys = false } = options;\n\t\tthis.highlight = options.highlight ?? true;\n\n\t\t// Parse and re-stringify for formatting\n\t\ttry {\n\t\t\tlet data = globalThis.JSON.parse(json);\n\n\t\t\tif (sortKeys && typeof data === \"object\" && data !== null) {\n\t\t\t\tdata = this.sortObject(data);\n\t\t\t}\n\n\t\t\tthis.text = globalThis.JSON.stringify(data, null, indent);\n\t\t} catch {\n\t\t\t// If parsing fails, use the original text\n\t\t\tthis.text = json;\n\t\t}\n\t}\n\n\t/**\n\t * Create JSON from any data object.\n\t */\n\tstatic fromData(data: unknown, options: JSONOptions = {}): JSON {\n\t\tconst { indent = 2, sortKeys = false } = options;\n\n\t\tlet processedData = data;\n\t\tif (sortKeys && typeof data === \"object\" && data !== null) {\n\t\t\tprocessedData = JSON.prototype.sortObject(data);\n\t\t}\n\n\t\tconst json = globalThis.JSON.stringify(processedData, null, indent);\n\t\tconst instance = new JSON(json, { ...options, sortKeys: false }); // Already sorted\n\t\treturn instance;\n\t}\n\n\tprivate sortObject(obj: unknown): unknown {\n\t\tif (Array.isArray(obj)) {\n\t\t\treturn obj.map((item) => this.sortObject(item));\n\t\t}\n\t\tif (obj !== null && typeof obj === \"object\") {\n\t\t\tconst sorted: Record<string, unknown> = {};\n\t\t\tconst keys = Object.keys(obj as Record<string, unknown>).sort();\n\t\t\tfor (const key of keys) {\n\t\t\t\tsorted[key] = this.sortObject((obj as Record<string, unknown>)[key]);\n\t\t\t}\n\t\t\treturn sorted;\n\t\t}\n\t\treturn obj;\n\t}\n\n\t/**\n\t * Apply JSON syntax highlighting.\n\t */\n\tprivate highlightJSON(text: string): string {\n\t\tif (!this.highlight) {\n\t\t\treturn text;\n\t\t}\n\n\t\t// JSON syntax highlighting patterns\n\t\tconst highlighted = text\n\t\t\t// Strings (keys and values)\n\t\t\t.replace(/\"([^\"\\\\]|\\\\.)*\"/g, (match) => {\n\t\t\t\treturn Style.parse(\"#f1fa8c\").apply(match); // Yellow for strings\n\t\t\t})\n\t\t\t// Numbers\n\t\t\t.replace(/\\b(-?\\d+\\.?\\d*(?:e[+-]?\\d+)?)\\b/gi, (match) => {\n\t\t\t\treturn Style.parse(\"#bd93f9\").apply(match); // Purple for numbers\n\t\t\t})\n\t\t\t// Booleans and null\n\t\t\t.replace(/\\b(true|false)\\b/g, (match) => {\n\t\t\t\treturn match === \"true\"\n\t\t\t\t\t? Style.parse(\"#50fa7b\").apply(match) // Green for true\n\t\t\t\t\t: Style.parse(\"#ff79c6\").apply(match); // Pink for false\n\t\t\t})\n\t\t\t.replace(/\\bnull\\b/g, (match) => {\n\t\t\t\treturn Style.parse(\"#8be9fd italic\").apply(match); // Cyan for null\n\t\t\t});\n\n\t\treturn highlighted;\n\t}\n\n\t__rich_console__(\n\t\t_console: Console,\n\t\t_consoleOptions: ConsoleOptions,\n\t): RenderResult {\n\t\tconst highlighted = this.highlightJSON(this.text);\n\t\treturn {\n\t\t\tsegments: [new Segment(highlighted + \"\\n\", Style.null())],\n\t\t\twidth: this.text\n\t\t\t\t.split(\"\\n\")\n\t\t\t\t.reduce((max, line) => Math.max(max, line.length), 0),\n\t\t};\n\t}\n}\n","import { marked } from \"marked\";\nimport TerminalRenderer from \"marked-terminal\";\nimport type { Console } from \"../console/console\";\nimport { Segment } from \"../core/segment\";\nimport type { ConsoleOptions } from \"../types/console-options\";\nimport type { Renderable, RenderResult } from \"../types/renderable\";\n\n// Configure marked to use terminal renderer\nmarked.setOptions({\n\trenderer: new TerminalRenderer() as any,\n});\n\nexport class Markdown implements Renderable {\n\tconstructor(public readonly markup: string) {}\n\n\t__rich_console__(_console: Console, _options: ConsoleOptions): RenderResult {\n\t\tconst rendered = marked.parse(this.markup) as string;\n\n\t\treturn {\n\t\t\tsegments: [new Segment(rendered)],\n\t\t\twidth: 0, // Placeholder\n\t\t};\n\t}\n}\n","// Core\n/** biome-ignore-all assist/source/organizeImports: biome-ignore assist/source/organizeImports */\nimport { Console } from \"./console/console\";\nexport { Console };\nexport { Style } from \"./core/style\";\nexport { Segment } from \"./core/segment\";\nexport { MarkupParser } from \"./core/markup\";\n\n// Renderables\nexport { Text } from \"./renderables/text\";\nexport { Panel } from \"./renderables/panel\";\nexport { Rule } from \"./renderables/rule\";\nexport { Table } from \"./renderables/table\";\nexport { Tree } from \"./renderables/tree\";\nexport { Layout } from \"./layout/layout\";\nexport { Grid } from \"./layout/grid\";\nexport { Padding } from \"./renderables/padding\";\nexport { Align } from \"./renderables/align\";\nexport { Columns } from \"./renderables/columns\";\nexport { JSON } from \"./renderables/json\";\n\n// Traceback\nexport { Traceback, installTracebackHandler } from \"./traceback/traceback\";\n\n// Prompts\nexport { Prompt } from \"./prompt/prompt\";\nexport { Confirm } from \"./prompt/confirm\";\n\n// Hooks\nexport { install } from \"./hooks/install\";\n\n// Syntax Highlighting\nexport { Syntax } from \"./syntax/syntax\";\nexport {\n\tMONOKAI,\n\tDRACULA,\n\tGITHUB_LIGHT,\n\tONE_DARK,\n\tgetTheme,\n\tSYNTAX_THEMES,\n\ttype SyntaxTheme,\n} from \"./syntax/theme\";\n\n// Markdown\nexport { Markdown } from \"./markdown/markdown\";\n\n// Progress\nexport {\n\tProgressBar,\n\tPercentageColumn,\n\tTimeElapsedColumn,\n\tTimeRemainingColumn,\n} from \"./progress/bar\";\nexport { Progress } from \"./progress/progress\";\nexport { track } from \"./progress/track\";\n\n// Status & Live\nexport { Spinner, listSpinners } from \"./status/spinner\";\nexport { Status } from \"./status/status\";\nexport { Live, sleep } from \"./live/live\";\nexport {\n\tSPINNERS,\n\tgetSpinner,\n\tlistSpinners as getSpinnerNames,\n\ttype SpinnerData,\n} from \"./status/spinners\";\n\n// Themes\nexport { Theme, DEFAULT_THEME } from \"./themes/theme\";\nexport { Palette } from \"./themes/palette\";\n\n// Utilities\nexport { Color } from \"./utils/color\";\nexport {\n\tgetBox,\n\tlistBoxStyles,\n\ttype BoxStyle,\n\ttype BoxData,\n} from \"./utils/box\";\nexport { EMOJI, replaceEmoji, listEmoji, hasEmoji } from \"./utils/emoji\";\n\n// Logging\nexport { RichHandler } from \"./logging/handler\";\nexport { Logger } from \"./logging/logger\";\nexport { inspect } from \"./utils/inspect\";\n\n// Global Helpers\nconst globalConsole = new Console();\nexport const print = globalConsole.print.bind(globalConsole);\n\n// Types\nexport * from \"./types/console-options\";\nexport * from \"./types/renderable\";\nexport * from \"./types/style-types\";\n\n// Legacy exports for backwards compatibility\nexport { MONOKAI_THEME } from \"./syntax/theme\";\n","import { readFileSync } from 'node:fs';\n\nexport interface ResourceResult {\n  content: string;\n  detectedType?: string;\n}\n\n/**\n * Read a resource from a file path, URL, or stdin\n */\nexport async function readResource(path: string): Promise<ResourceResult> {\n  // Handle stdin\n  if (path === '-') {\n    const content = await readStdin();\n    return { content };\n  }\n\n  // Handle URLs\n  if (path.startsWith('http://') || path.startsWith('https://')) {\n    const content = await readUrl(path);\n    const detectedType = detectTypeFromExtension(path);\n    return { content, detectedType };\n  }\n\n  // Handle local files\n  try {\n    const content = readFileSync(path, 'utf-8');\n    const detectedType = detectTypeFromExtension(path);\n    return { content, detectedType };\n  } catch (error) {\n    throw new Error(`Unable to read file: ${path}. ${error}`);\n  }\n}\n\n/**\n * Read from stdin\n */\nasync function readStdin(): Promise<string> {\n  return new Promise((resolve, reject) => {\n    let data = '';\n    process.stdin.setEncoding('utf-8');\n\n    process.stdin.on('data', (chunk) => {\n      data += chunk;\n    });\n\n    process.stdin.on('end', () => {\n      resolve(data);\n    });\n\n    process.stdin.on('error', (error) => {\n      reject(new Error(`Failed to read from stdin: ${error}`));\n    });\n  });\n}\n\n/**\n * Read from URL\n */\nasync function readUrl(url: string): Promise<string> {\n  try {\n    const response = await fetch(url);\n    if (!response.ok) {\n      throw new Error(`HTTP ${response.status}: ${response.statusText}`);\n    }\n    return await response.text();\n  } catch (error) {\n    throw new Error(`Unable to fetch URL: ${url}. ${error}`);\n  }\n}\n\n/**\n * Detect content type from file extension\n */\nexport function detectTypeFromExtension(path: string): string | undefined {\n  const extensionMap: Record<string, string> = {\n    '.md': 'markdown',\n    '.markdown': 'markdown',\n    '.json': 'json',\n    '.csv': 'csv',\n    '.tsv': 'csv',\n    '.js': 'javascript',\n    '.ts': 'typescript',\n    '.jsx': 'javascript',\n    '.tsx': 'typescript',\n    '.py': 'python',\n    '.html': 'html',\n    '.css': 'css',\n    '.xml': 'xml',\n    '.yaml': 'yaml',\n    '.yml': 'yaml',\n    '.toml': 'toml',\n  };\n\n  const extension = path.toLowerCase().match(/\\.[^.]+$/)?.[0];\n  return extension ? extensionMap[extension] : undefined;\n}\n\n/**\n * Detect if content is JSON\n */\nexport function isJsonContent(content: string): boolean {\n  try {\n    JSON.parse(content);\n    return true;\n  } catch {\n    return false;\n  }\n}\n","#!/usr/bin/env node\n\nimport { Command } from 'commander';\nimport {\n  Console,\n  Syntax,\n  Markdown,\n  JSON as RichJSON,\n  Text,\n  Panel,\n  Padding,\n  Align,\n} from './index.js';\nimport { readResource } from './cli/utils.js';\nimport type { Renderable } from './types/renderable.js';\nimport { readFileSync } from 'node:fs';\nimport { fileURLToPath } from 'node:url';\nimport { dirname, join } from 'node:path';\n\nconst __filename = fileURLToPath(import.meta.url);\nconst __dirname = dirname(__filename);\nconst packageJson = JSON.parse(readFileSync(join(__dirname, '../package.json'), 'utf-8'));\nconst VERSION = packageJson.version;\n\ntype AlignMethod = 'left' | 'center' | 'right';\n\nconst program = new Command();\n\nprogram\n  .name('richjs')\n  .description('Rich terminal rendering for Node.js - CLI toolbox for fancy terminal output')\n  .version(VERSION, '-v, --version', 'Display version')\n  .argument('[resource]', 'Path to file, URL, or text to render (use \"-\" for stdin)', '')\n  .option('-p, --print', 'Print console markup')\n  .option('-m, --markdown', 'Render as markdown')\n  .option('-J, --json', 'Render as JSON')\n  .option('-s, --syntax', 'Force syntax highlighting')\n  .option('-n, --line-numbers', 'Show line numbers (for syntax highlighting)')\n  .option('--theme <name>', 'Syntax theme (monokai, dracula, github-light, onedark)', 'monokai')\n  .option('-x, --lexer <name>', 'Specify lexer for syntax highlighting')\n  .option(\n    '-a, --panel <box>',\n    'Wrap output in a panel with box style (rounded, heavy, double, square, etc.)',\n  )\n  .option('--title <text>', 'Set panel title')\n  .option('--caption <text>', 'Set panel caption')\n  .option('-w, --width <size>', 'Set output width', parseInt)\n  .option('-l, --left', 'Align output to left')\n  .option('-c, --center', 'Align output to center')\n  .option('-r, --right', 'Align output to right')\n  .option('-d, --padding <padding>', 'Add padding (single number or top,right,bottom,left)')\n  .option('-S, --style <style>', 'Apply style to output')\n  .helpOption('-h, --help', 'Display help');\n\ninterface CliOptions {\n  print?: boolean;\n  markdown?: boolean;\n  json?: boolean;\n  syntax?: boolean;\n  lineNumbers?: boolean;\n  theme?: string;\n  lexer?: string;\n  panel?: string;\n  title?: string;\n  caption?: string;\n  width?: number;\n  left?: boolean;\n  center?: boolean;\n  right?: boolean;\n  padding?: string;\n  style?: string;\n}\n\nprogram.action(async (resource: string, options: CliOptions) => {\n  const console = new Console();\n\n  if (!resource) {\n    console.print('[yellow]No resource provided. Use --help for usage information.[/]');\n    process.exit(0);\n  }\n\n  try {\n    const { content, detectedType } = await readResource(resource);\n\n    // Determine rendering mode\n    let mode: 'print' | 'markdown' | 'json' | 'syntax' = 'syntax';\n\n    if (options.print) {\n      mode = 'print';\n    } else if (options.markdown) {\n      mode = 'markdown';\n    } else if (options.json) {\n      mode = 'json';\n    } else if (options.syntax) {\n      mode = 'syntax';\n    } else {\n      // Auto-detect based on file type\n      if (detectedType === 'markdown') {\n        mode = 'markdown';\n      } else if (detectedType === 'json') {\n        mode = 'json';\n      } else {\n        mode = 'syntax';\n      }\n    }\n\n    // Create base renderable based on mode\n    let renderable: Renderable;\n\n    switch (mode) {\n      case 'print': {\n        renderable = new Text(content);\n        break;\n      }\n\n      case 'markdown': {\n        renderable = new Markdown(content);\n        break;\n      }\n\n      case 'json': {\n        renderable = new RichJSON(content);\n        break;\n      }\n\n      case 'syntax':\n      default: {\n        const lexer = options.lexer || detectedType || 'text';\n        renderable = new Syntax(content, lexer, {\n          theme: options.theme as any,\n          lineNumbers: options.lineNumbers,\n        });\n        break;\n      }\n    }\n\n    // Apply layout transformations (order matters: padding -> panel -> align)\n\n    // 1. Apply padding if specified\n    if (options.padding) {\n      const paddingValues = options.padding.split(',').map((v) => parseInt(v.trim()));\n\n      if (paddingValues.length === 1) {\n        renderable = new Padding(renderable, paddingValues[0]);\n      } else if (paddingValues.length === 2) {\n        renderable = new Padding(renderable, [paddingValues[0], paddingValues[1]]);\n      } else if (paddingValues.length === 4) {\n        renderable = new Padding(renderable, [\n          paddingValues[0],\n          paddingValues[1],\n          paddingValues[2],\n          paddingValues[3],\n        ]);\n      } else {\n        console.print('[red]Error:[/] Padding should be 1, 2, or 4 comma-separated values');\n        process.exit(1);\n      }\n    }\n\n    // 2. Wrap in panel if specified\n    if (options.panel) {\n      renderable = new Panel(renderable, {\n        box: options.panel as any,\n        title: options.title,\n        subtitle: options.caption,\n        borderStyle: options.style,\n      });\n    }\n\n    // 3. Apply alignment if specified\n    if (options.left || options.center || options.right) {\n      let align: AlignMethod = 'left';\n      if (options.center) align = 'center';\n      if (options.right) align = 'right';\n      renderable = new Align(renderable, align);\n    }\n\n    // Print with optional width constraint\n    if (options.width) {\n      console.print(renderable, { width: options.width });\n    } else {\n      console.print(renderable);\n    }\n  } catch (error) {\n    console.print(`[red]Error:[/] ${error instanceof Error ? error.message : String(error)}`);\n    process.exit(1);\n  }\n});\n\nprogram.parse();\n"]}